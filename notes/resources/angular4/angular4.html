<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-12-13 Thu 20:35 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Angular</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Damian Chrzanowski" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../../assets/org.css"/>
<link rel="icon" href="../../assets/favicon.ico">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Angular</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgccfd9c8">1. Installation</a>
<ul>
<li><a href="#org7cf4e83">1.1. Updating ng cli</a></li>
</ul>
</li>
<li><a href="#org6b015a3">2. Serving</a></li>
<li><a href="#org799eb6a">3. Adding Augury</a></li>
<li><a href="#org165a2f6">4. Adding bootstrap</a></li>
<li><a href="#orgf99f864">5. Components</a>
<ul>
<li><a href="#orgade2720">5.1. Manual Component Insertion</a></li>
<li><a href="#orgaf9b6c1">5.2. Using the cli to add components</a></li>
<li><a href="#org0706059">5.3. Selectors in Components</a></li>
</ul>
</li>
<li><a href="#orga17aa95">6. Global Styles</a></li>
<li><a href="#orgb6070a6">7. Databinding</a>
<ul>
<li><a href="#org405a13b">7.1. String interpolation</a></li>
<li><a href="#orgd5f251d">7.2. Two way binding with <code>[(ngModel)]</code></a></li>
<li><a href="#org0eca296">7.3. Property binding with <code>[property] = "data"</code></a></li>
<li><a href="#orga79ec19">7.4. Event Binding with <code>(event) = "expression"</code></a></li>
</ul>
</li>
<li><a href="#orgf5a6318">8. Directives</a>
<ul>
<li><a href="#org2d21b88">8.1. List of Directives</a></li>
<li><a href="#orgf1951f6">8.2. <code>ngIf</code> directive</a></li>
<li><a href="#org329e845">8.3. <code>ngElse</code></a></li>
<li><a href="#orga99c4e6">8.4. <code>ngStyle</code></a></li>
<li><a href="#orgfd8a9cb">8.5. <code>ngClass</code></a></li>
<li><a href="#org3e6a627">8.6. <code>ngFor</code></a></li>
<li><a href="#org3e5aa6b">8.7. <code>ngSwitch</code></a></li>
</ul>
</li>
<li><a href="#org1031993">9. Creating Directives</a>
<ul>
<li><a href="#orge8adf79">9.1. <code>Attribute Directive</code> - Looks like a normal attribute, affects the element to which it is attached to</a></li>
<li><a href="#org9ce4893">9.2. <code>Structural Directive</code> - has a leading <code>*</code> and affects the whole area in the DOM</a></li>
</ul>
</li>
<li><a href="#orgcdce725">10. Custom Property Binding</a></li>
<li><a href="#orge39ea24">11. Custom Events</a></li>
<li><a href="#org849ceb2">12. Custom References</a></li>
<li><a href="#org3a3c706">13. Access to DOM via <code>@ViewChild</code> as a native Element Ref</a></li>
<li><a href="#org848a726">14. Inserting DOM into a component element with ng-content</a></li>
<li><a href="#org674f2ed">15. Lifecycle hooks</a>
<ul>
<li><a href="#orgf1bea72">15.1. <code>ngOnChanges</code></a></li>
<li><a href="#org3511cdd">15.2. <code>ngOnInit</code></a></li>
<li><a href="#org95844a5">15.3. <code>ngDoCheck</code></a></li>
<li><a href="#org1509ebf">15.4. <code>ngAfterContentInit</code></a></li>
<li><a href="#org5a85548">15.5. <code>ngAfterContentChecked</code></a></li>
<li><a href="#orgbdec750">15.6. <code>ngAfterViewInit</code></a></li>
<li><a href="#org5c3c613">15.7. <code>ngAfterViewChecked</code></a></li>
<li><a href="#orgbbef920">15.8. <code>ngOnDestroy</code></a></li>
</ul>
</li>
<li><a href="#org745cd9f">16. Services</a>
<ul>
<li><a href="#orgf2d1f75">16.1. Example on a Status Change Logging System</a></li>
<li><a href="#org75fb857">16.2. Using a service to pass information (events) between components</a></li>
</ul>
</li>
<li><a href="#org0173028">17. Routing</a>
<ul>
<li><a href="#orgebd0604">17.1. Router setup</a></li>
<li><a href="#orge5bfc4c">17.2. Router setup with children</a></li>
<li><a href="#org0b60631">17.3. Router injection into html</a></li>
<li><a href="#orge9045df">17.4. Anchors for routing</a></li>
<li><a href="#orgc1034ee">17.5. Adding a class to the active route</a></li>
<li><a href="#org46d913a">17.6. Loading routes programmatically</a></li>
<li><a href="#org4150ebd">17.7. Retrieving parameters from the url via a snapshot</a></li>
<li><a href="#orgbefad29">17.8. Retrieving parameters via observables</a></li>
<li><a href="#org3fe61c4">17.9. Setting up redirection, like 404</a></li>
<li><a href="#org8560831">17.10. Guards</a></li>
<li><a href="#org1c8ec7d">17.11. Guards for child paths</a></li>
</ul>
</li>
<li><a href="#orgd203eac">18. Observables</a>
<ul>
<li><a href="#org44aa65a">18.1. Handling</a></li>
<li><a href="#orgd8445f5">18.2. Making a simple timer observable</a></li>
<li><a href="#org455387f">18.3. Creating an observable from scratch</a></li>
<li><a href="#org437ac97">18.4. Removing custom observables</a></li>
<li><a href="#org448a3cf">18.5. <code>Subject</code> observable</a></li>
<li><a href="#org100bbfc">18.6. Observable operators</a></li>
</ul>
</li>
<li><a href="#orgfe0026e">19. Forms</a>
<ul>
<li><a href="#orgad976ff">19.1. Types</a></li>
<li><a href="#org858d11e">19.2. Template driven approach</a></li>
<li><a href="#orge12b668">19.3. Reactive driven approach</a></li>
<li><a href="#org952b446">19.4. File upload</a></li>
</ul>
</li>
<li><a href="#org513cff4">20. Pipes</a>
<ul>
<li><a href="#orga116b35">20.1. List of pipes</a></li>
<li><a href="#org1ddc9df">20.2. Simple examples</a></li>
<li><a href="#org9c4a07f">20.3. Custom pipes</a></li>
<li><a href="#orgb412768">20.4. Asynchronous pipe</a></li>
</ul>
</li>
<li><a href="#orgaa8dee2">21. Http requests</a>
<ul>
<li><a href="#org0773854">21.1. Sending data</a></li>
<li><a href="#org1f66e4b">21.2. Custom headers</a></li>
<li><a href="#org043c78a">21.3. Receiving data</a></li>
<li><a href="#org4a69788">21.4. Wrapping the data transformation in the service component and error handling</a></li>
<li><a href="#org712e38b">21.5. Using the async pipe</a></li>
</ul>
</li>
<li><a href="#orga0a30fb">22. Using firebase authentication</a>
<ul>
<li><a href="#orga14496a">22.1. Signing up, Signing in, token retrieval</a></li>
<li><a href="#org39f270a">22.2. Sending a token to Firebase with requests</a></li>
</ul>
</li>
<li><a href="#org577ff08">23. Feature Modules</a>
<ul>
<li><a href="#org765f721">23.1. <code>@NgModule</code> decorator options</a></li>
<li><a href="#org78960bc">23.2. Building a module</a></li>
</ul>
</li>
<li><a href="#org11f51f1">24. Shared modules</a></li>
<li><a href="#org2a8ff29">25. Lazy loading modules using routes</a></li>
<li><a href="#orgdc0cbd8">26. Preloading lazy loading</a></li>
<li><a href="#org127bd6e">27. Core modules</a></li>
<li><a href="#org558031e">28. Ahead-of-Time Compilation</a></li>
<li><a href="#org3f685c9">29. Deployment</a>
<ul>
<li><a href="#orgd8a091a">29.1. Setting the right path</a></li>
</ul>
</li>
<li><a href="#orgf1e878e">30. Animations</a>
<ul>
<li><a href="#org3d7832f">30.1. Setup</a></li>
<li><a href="#orgf72d34e">30.2. Component setup</a></li>
<li><a href="#org9b27e64">30.3. Example of animating an element in and out of the DOM</a></li>
<li><a href="#orgaa81bab">30.4. More control over the entire animation</a></li>
<li><a href="#org0c9bf40">30.5. Grouping</a></li>
<li><a href="#orge1c9871">30.6. Animation callbacks</a></li>
<li><a href="#orgd34acdd">30.7. Animating routes and hiding the footer</a></li>
<li><a href="#org5b1b8aa">30.8. Example fade-in-out with <code>*ngIf</code></a></li>
</ul>
</li>
<li><a href="#orgeda3fdd">31. NgRx</a>
<ul>
<li><a href="#org262fd0c">31.1. Adding actions</a></li>
<li><a href="#org47f34b1">31.2. Adding reducers</a></li>
<li><a href="#orge07aa8a">31.3. Registration of NgRx</a></li>
<li><a href="#orgb4bc06e">31.4. Retrieving data</a></li>
<li><a href="#org87fa9d2">31.5. Adding data</a></li>
</ul>
</li>
<li><a href="#orgdadc7d8">32. Angular Universal (Angular on the backend)</a></li>
</ul>
</div>
</div>
<p>
<a href="../../index.html">Home Page</a>
</p>

<div id="outline-container-orgccfd9c8" class="outline-2">
<h2 id="orgccfd9c8"><span class="section-number-2">1</span> Installation</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>Install node and npm</li>
<li>Run the following</li>
<li>Install angular:</li>
</ul>
<pre class="example">
npm install -g @angular/cli
</pre>
<ul class="org-ul">
<li>might need this to fight off a bug:</li>
</ul>
<pre class="example">
npm install -g --unsafe-perm @angular/cli
</pre>

<ul class="org-ul">
<li>Init project</li>
</ul>
<pre class="example">
ng new projectName
cd projectName
</pre>
</div>

<div id="outline-container-org7cf4e83" class="outline-3">
<h3 id="org7cf4e83"><span class="section-number-3">1.1</span> Updating ng cli</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><p>
Run the following:
</p>
<div class="org-src-container">
<pre class="src src-sh">npm uninstall -g angular-cli @angular/cli
npm cache clean
npm install -g @angular/cli
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org6b015a3" class="outline-2">
<h2 id="org6b015a3"><span class="section-number-2">2</span> Serving</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>Inside of the project's folder</li>
</ul>
<pre class="example">
ng serve
</pre>
</div>
</div>

<div id="outline-container-org799eb6a" class="outline-2">
<h2 id="org799eb6a"><span class="section-number-2">3</span> Adding Augury</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>Augury is an Angular debugger and anyliser</li>
<li>Add via Google Chrome store</li>
</ul>
</div>
</div>

<div id="outline-container-org165a2f6" class="outline-2">
<h2 id="org165a2f6"><span class="section-number-2">4</span> Adding bootstrap</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>add bootstrap with <code>npm i --save bootstrap</code></li>
<li>open up the <code>.angular-cli.json</code> file</li>
<li>add to the styles array:</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #98be65;">"../node_modules/bootstrap/dist/css/bootstrap.min.css"</span>
</pre>
</div>
<ul class="org-ul">
<li>mind the <code>..</code> as the root is counted from the <code>index.html</code> file</li>
</ul>
</div>
</div>

<div id="outline-container-orgf99f864" class="outline-2">
<h2 id="orgf99f864"><span class="section-number-2">5</span> Components</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>each can have its own styling, code and logic</li>
<li>components are <b>reusable</b></li>
<li>usually create a subfolder in the app directory for each component</li>
<li>component is a class</li>
</ul>
</div>

<div id="outline-container-orgade2720" class="outline-3">
<h3 id="orgade2720"><span class="section-number-3">5.1</span> Manual Component Insertion</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<ol class="org-ol">
<li><a id="org91f478d"></a>Adding the component file<br />
<div class="outline-text-4" id="text-5-1-1">
<ul class="org-ul">
<li>in here as an example we add a component called <code>server</code></li>
<li>name the folder like the component (server) and the file like so: <code>server.component.ts</code></li>
<li>add a html file and/or a css file <code>server.component.html/css</code></li>
<li>example folder hierarchy
<ul class="org-ul">
<li>app <b>-&gt;</b> server <b>-&gt;</b> server.component.ts</li>
</ul></li>
<li>name the class as <code>ServerComponent</code></li>
<li>basic template:</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Component <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'app-server'</span>,
    templateUrl: <span style="color: #98be65;">'./server.component.html'</span>,
    styleUrls: <span style="color: #98be65;">[</span><span style="color: #98be65;">'./server.component.css'</span><span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">ServerComponent</span> <span style="color: #fff0f5;">{</span>

<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>in the component we have:
<ul class="org-ul">
<li><code>selector</code>: the html tag that will be used to inject the component into</li>
<li><code>templateUrl</code>: the html that will be used to display the component</li>
<li><code>styleUrls</code>: the css that will be used to style the component</li>
<li>sdfisf</li>
</ul></li>
</ul>
</div>
</li>

<li><a id="org70509bb"></a>Adding the component to the <code>app.modules.ts</code><br />
<div class="outline-text-4" id="text-5-1-2">
<ul class="org-ul">
<li>the newly made component needs to be added into the <code>@NgModule</code></li>
<li>add the following to the <code>declarations</code> key:</li>
</ul>
<pre class="example">
declarations: [
    AppComponent,
    ServerComponent
],
</pre>
<ul class="org-ul">
<li>also import the component just above the <code>@NgModule</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> ServerComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./server/server.component'</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgaf9b6c1" class="outline-3">
<h3 id="orgaf9b6c1"><span class="section-number-3">5.2</span> Using the cli to add components</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>verbose and abbreviated versions</li>
</ul>
<pre class="example">
ng generate component componentName
ng g c componentName
</pre>
<ul class="org-ul">
<li>do not create test files</li>
</ul>
<pre class="example">
ng g c componentName --spec false
</pre>
</div>
</div>

<div id="outline-container-org0706059" class="outline-3">
<h3 id="org0706059"><span class="section-number-3">5.3</span> Selectors in Components</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>default component is the tag name</li>
<li>using a component as an attribute of a tag</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'[app-servers]'</span>,
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>using a component as a class</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'.app-servers'</span>,
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga17aa95" class="outline-2">
<h2 id="orga17aa95"><span class="section-number-2">6</span> Global Styles</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>switch off local DOM (shadow DOM)</li>
<li>add an <code>encapsulation</code> key value pair to the <code>@Component</code> decorator</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">encapsulation: ViewEncapsulation.None
</pre>
</div>
<ul class="org-ul">
<li>also import <code>ViewEncapsulation</code> from <code>@angular/core</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgb6070a6" class="outline-2">
<h2 id="orgb6070a6"><span class="section-number-2">7</span> Databinding</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org405a13b" class="outline-3">
<h3 id="org405a13b"><span class="section-number-3">7.1</span> String interpolation</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>output a variable or a method into html</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">{{ someVariableName }}
{{ someMethodName() }}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5f251d" class="outline-3">
<h3 id="orgd5f251d"><span class="section-number-3">7.2</span> Two way binding with <code>[(ngModel)]</code></h3>
<div class="outline-text-3" id="text-7-2">
<ul class="org-ul">
<li>to enable <code>ngModel</code> make sure to import the forms module in the <code>app.module.ts</code> file, by adding <code>import { FormsModule } from '@angular/forms';</code></li>
<li>also <code>FormsModule</code> must be in the <code>imports</code> array, in the <code>app.module.ts</code> file</li>
<li>uses round brackets inside square brackets syntax</li>
<li>set a <code>userName</code> variable in the relevant component</li>
<li>creates a two-way link between the variable and the input</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"text"</span> [(ngModel)]=<span style="color: #98be65;">"userName"</span>&gt;
&lt;<span style="color: #c678dd;">p</span>&gt;{{userName}}&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0eca296" class="outline-3">
<h3 id="org0eca296"><span class="section-number-3">7.3</span> Property binding with <code>[property] = "data"</code></h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li>bind a html property to a variable</li>
<li>skip the square brackets if only a string is passed, eg. <code>&lt;a fragment="loading"&gt;Link&lt;/a&gt;</code></li>
<li>uses square brackets syntax</li>
<li>in here the <code>allowNewServer</code> triggers the disabled attribute</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> [disabled]=<span style="color: #98be65;">"!allowNewServer"</span>&gt;Click Me&lt;/<span style="color: #c678dd;">button</span>&gt;
&lt;<span style="color: #c678dd;">p</span> [style.opacity]=<span style="color: #98be65;">"opacity"</span>&gt;sample text&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
</div>
</div>


<div id="outline-container-orga79ec19" class="outline-3">
<h3 id="orga79ec19"><span class="section-number-3">7.4</span> Event Binding with <code>(event) = "expression"</code></h3>
<div class="outline-text-3" id="text-7-4">
<ul class="org-ul">
<li>uses round brackets syntax</li>
<li>bind an event to a method</li>
<li>in here we execute <code>onCreateServer()</code> method on <code>click</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"btn btn-primary"</span>
    [disabled]=<span style="color: #98be65;">"!allowNewServer"</span>
    (click)=<span style="color: #98be65;">"onCreateServer()"</span>&gt;Click Me&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>

<ul class="org-ul">
<li>an example on listening to an input</li>
<li>in here we pass the reserved keyword <code>$event</code> into the method</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"text"</span> <span style="color: #db5762;">value</span>=<span style="color: #98be65;">""</span> (input)=<span style="color: #98be65;">"onUpdateServerName($event)"</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>in typescript we capture the event's value like this</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">onUpdateServerName<span style="color: #fff0f5;">(</span>event: <span style="color: #51afef; font-style: italic;">any</span><span style="color: #fff0f5;">)</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">this</span>.serverName = event.target.value;
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf5a6318" class="outline-2">
<h2 id="orgf5a6318"><span class="section-number-2">8</span> Directives</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-org2d21b88" class="outline-3">
<h3 id="org2d21b88"><span class="section-number-3">8.1</span> <a href="https://angular.io/api?type=directive">List of Directives</a></h3>
</div>

<div id="outline-container-orgf1951f6" class="outline-3">
<h3 id="orgf1951f6"><span class="section-number-3">8.2</span> <code>ngIf</code> directive</h3>
<div class="outline-text-3" id="text-8-2">
<ul class="org-ul">
<li>typical conditional statement</li>
<li>place a <code>*</code> in from of the statement, it indicates that the directive add/removes elements in the DOM, ie. it is a structural directive</li>
<li>when <code>serverCreated</code> evaluates to true the element gets created</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">p</span> *ngIf=<span style="color: #98be65;">"serverCreated"</span>&gt;Server was created, server name is {{serverName}}&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org329e845" class="outline-3">
<h3 id="org329e845"><span class="section-number-3">8.3</span> <code>ngElse</code></h3>
<div class="outline-text-3" id="text-8-3">
<ul class="org-ul">
<li>use a <code>ng-template</code> with a <code>#varName</code> attribute to enhance the <code>ngIf</code></li>
<li>the alternative is to simply use the reverse of <code>someVar</code> to <code>!someVar</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">p</span> *ngIf=<span style="color: #98be65;">"serverCreated; else noServer"</span>&gt;Server was created, server name is {{serverName}}&lt;/<span style="color: #c678dd;">p</span>&gt;
&lt;<span style="color: #c678dd;">ng-template</span> #noServer&gt;
    &lt;<span style="color: #c678dd;">p</span>&gt;No server was created&lt;/<span style="color: #c678dd;">p</span>&gt;
&lt;/<span style="color: #c678dd;">ng-template</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orga99c4e6" class="outline-3">
<h3 id="orga99c4e6"><span class="section-number-3">8.4</span> <code>ngStyle</code></h3>
<div class="outline-text-3" id="text-8-4">
<ul class="org-ul">
<li>apply a style to the element</li>
<li>allows the execution of valid JavaScript</li>
<li>in here <code>getColor()</code> returns a color for the element</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">p</span> [ngStyle]=<span style="color: #98be65;">"{'background-color': getColor()}"</span>&gt;Hello World&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfd8a9cb" class="outline-3">
<h3 id="orgfd8a9cb"><span class="section-number-3">8.5</span> <code>ngClass</code></h3>
<div class="outline-text-3" id="text-8-5">
<ul class="org-ul">
<li>apply a class to the element</li>
<li>apply the <code>online</code> class when the expression <code>serverStatus === 'online'</code> is true</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">p</span> [ngClass]=<span style="color: #98be65;">"{online: serverStatus === 'online'}"</span>&gt;Hello World&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e6a627" class="outline-3">
<h3 id="org3e6a627"><span class="section-number-3">8.6</span> <code>ngFor</code></h3>
<div class="outline-text-3" id="text-8-6">
<ul class="org-ul">
<li>loop through an array and repeat the element</li>
<li>in here <code>array</code> is some arbitrary array</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">p</span> *ngFor=<span style="color: #98be65;">"let each of array"</span>&gt;&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>

<ul class="org-ul">
<li>access the index of the iteration with the <code>index</code> keyword</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">p</span> *ngFor=<span style="color: #98be65;">"let each of array; let i = index"</span>&gt;&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e5aa6b" class="outline-3">
<h3 id="org3e5aa6b"><span class="section-number-3">8.7</span> <code>ngSwitch</code></h3>
<div class="outline-text-3" id="text-8-7">
<ul class="org-ul">
<li>it is used like a traditional <code>switch</code> statement in most languages</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> [ngSwitch]=<span style="color: #98be65;">"value"</span>&gt;
    &lt;<span style="color: #c678dd;">p</span> *ngSwitch=<span style="color: #98be65;">"5"</span>&gt;Value is 5&lt;/<span style="color: #c678dd;">p</span>&gt;
    &lt;<span style="color: #c678dd;">p</span> *ngSwitch=<span style="color: #98be65;">"10"</span>&gt;Value is 10&lt;/<span style="color: #c678dd;">p</span>&gt;
    &lt;<span style="color: #c678dd;">p</span> *ngSwitch=<span style="color: #98be65;">"100"</span>&gt;Value is 100&lt;/<span style="color: #c678dd;">p</span>&gt;
    &lt;<span style="color: #c678dd;">p</span> *ngSwitchDefault&gt;Value is default&lt;/<span style="color: #c678dd;">p</span>&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt; <span style="color: #5B6268;">&lt;!--  </span><span style="color: #5B6268;">ends here </span><span style="color: #5B6268;">--&gt;</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1031993" class="outline-2">
<h2 id="org1031993"><span class="section-number-2">9</span> Creating Directives</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orge8adf79" class="outline-3">
<h3 id="orge8adf79"><span class="section-number-3">9.1</span> <code>Attribute Directive</code> - Looks like a normal attribute, affects the element to which it is attached to</h3>
<div class="outline-text-3" id="text-9-1">
</div>
<ol class="org-ol">
<li><a id="org78fa681"></a>Generating new attribute directives<br />
<div class="outline-text-4" id="text-9-1-1">
<ul class="org-ul">
<li>Create a new directive with <code>ng generate directive [name]</code> or simply <code>ng g d [name]</code></li>
<li>Example of a directive that gets inserted into html via the <code>appMyDirective</code> attribute and changes the element's background colour to green</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Directive, ElementRef, OnInit <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

@Directive<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'[appMyDirective]'</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">usign a [appMyDirective] selector</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">MyDirectiveDirective</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> elementRef: ElementRef<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #c678dd;">}</span>

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.elementRef.nativeElement.style.backgroundColor = <span style="color: #98be65;">'green'</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>inserting the directive into html</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">h4</span> appMyDirective&gt;<span style="text-decoration: underline;">Some Text Here</span>&lt;/<span style="color: #c678dd;">h4</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>example of a directive that uses the <code>renderer2</code> to modify the elements, it is the same principle but less error prone in some circumstances</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">MyDirectiveDirective</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> elRef: ElementRef, <span style="color: #51afef; font-style: italic;">private</span> renderer: Renderer2<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #c678dd;">}</span>

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.renderer.setStyle<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">this</span>.elRef.nativeElement, <span style="color: #98be65;">'background-color'</span>, <span style="color: #98be65;">'blue'</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org3e2d45d"></a>Using the <code>HostListener</code> to react to any event<br />
<div class="outline-text-4" id="text-9-1-2">
<ul class="org-ul">
<li>in this case the directive reacts to <code>mouseenter</code> and <code>mouseleave</code> events to change the background colour of the element</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">MyDirectiveDirective</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> elRef: ElementRef, <span style="color: #51afef; font-style: italic;">private</span> renderer: Renderer2<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #c678dd;">}</span>

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
    <span style="color: #c678dd;">}</span>

    @HostListener<span style="color: #c678dd;">(</span><span style="color: #98be65;">'mouseenter'</span><span style="color: #c678dd;">)</span> mouseover<span style="color: #c678dd;">(</span>eventData: Event<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.renderer.setStyle<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">this</span>.elRef.nativeElement, <span style="color: #98be65;">'background-color'</span>, <span style="color: #98be65;">'blue'</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>

    @HostListener<span style="color: #c678dd;">(</span><span style="color: #98be65;">'mouseleave'</span><span style="color: #c678dd;">)</span> mouseleave<span style="color: #c678dd;">(</span>eventData: Event<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.renderer.setStyle<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">this</span>.elRef.nativeElement, <span style="color: #98be65;">'background-color'</span>, <span style="color: #98be65;">'transparent'</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org52a15bd"></a>Using <code>HostBinding</code> to bind to properties<br />
<div class="outline-text-4" id="text-9-1-3">
<ul class="org-ul">
<li>this examples shows a much easier way to bind to element properties using <code>HostBinding</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">MyDirectiveDirective</span>  <span style="color: #fff0f5;">{</span>
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">bind style.backgroundColor to backgroundColor variable</span>
    @HostBinding<span style="color: #c678dd;">(</span><span style="color: #98be65;">'style.backgroundColor'</span><span style="color: #c678dd;">)</span> backgroundColor: <span style="color: #51afef; font-style: italic;">string</span> = <span style="color: #98be65;">'transparent'</span>;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> elRef: ElementRef, <span style="color: #51afef; font-style: italic;">private</span> renderer: Renderer2<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #c678dd;">}</span>

    @HostListener<span style="color: #c678dd;">(</span><span style="color: #98be65;">'mouseenter'</span><span style="color: #c678dd;">)</span> mouseover<span style="color: #c678dd;">(</span>eventData: Event<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.backgroundColor = <span style="color: #98be65;">'blue'</span>;
    <span style="color: #c678dd;">}</span>

    @HostListener<span style="color: #c678dd;">(</span><span style="color: #98be65;">'mouseleave'</span><span style="color: #c678dd;">)</span> mouseleave<span style="color: #c678dd;">(</span>eventData: Event<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.backgroundColor = <span style="color: #98be65;">'transparent'</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org1d0920a"></a>Binding to directive properties with <code>Input</code><br />
<div class="outline-text-4" id="text-9-1-4">
<ul class="org-ul">
<li>binding the properties</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Directive, Renderer2, OnInit, ElementRef, HostListener, HostBinding, Input <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

@Directive<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'[appMyDirective]'</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">usign a [appMyDirective] selector</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">MyDirectiveDirective</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span> <span style="color: #fff0f5;">{</span>
    @Input<span style="color: #c678dd;">()</span> defaultColor: <span style="color: #51afef; font-style: italic;">string</span> = <span style="color: #98be65;">'transparent'</span>;
    @Input<span style="color: #c678dd;">()</span> highlightColor: <span style="color: #51afef; font-style: italic;">string</span> = <span style="color: #98be65;">'blue'</span>;

    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">bind style.backgroundColor to backgroundColor variable</span>
    @HostBinding<span style="color: #c678dd;">(</span><span style="color: #98be65;">'style.backgroundColor'</span><span style="color: #c678dd;">)</span> backgroundColor: <span style="color: #51afef; font-style: italic;">string</span>;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> elRef: ElementRef, <span style="color: #51afef; font-style: italic;">private</span> renderer: Renderer2<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
    <span style="color: #c678dd;">}</span>

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.backgroundColor = <span style="color: #51afef; font-style: italic;">this</span>.defaultColor;
    <span style="color: #c678dd;">}</span>

    @HostListener<span style="color: #c678dd;">(</span><span style="color: #98be65;">'mouseenter'</span><span style="color: #c678dd;">)</span> mouseover<span style="color: #c678dd;">(</span>eventData: Event<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.backgroundColor = <span style="color: #51afef; font-style: italic;">this</span>.highlightColor;
    <span style="color: #c678dd;">}</span>

    @HostListener<span style="color: #c678dd;">(</span><span style="color: #98be65;">'mouseleave'</span><span style="color: #c678dd;">)</span> mouseleave<span style="color: #c678dd;">(</span>eventData: Event<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.backgroundColor = <span style="color: #51afef; font-style: italic;">this</span>.defaultColor;
    <span style="color: #c678dd;">}</span>

<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>usage in html</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">h4</span> appMyDirective
    [defaultColor]=<span style="color: #98be65;">"'yellow'"</span>
    [highlightColor]=<span style="color: #98be65;">"'red'"</span>&gt;<span style="text-decoration: underline;">Hello World</span>&lt;/<span style="color: #c678dd;">h4</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>it the case of passing in a string to the property, it is possible to omit the square brackets an single quotations like so:</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">h4</span> appMyDirective
    <span style="color: #db5762;">defaultColor</span>=<span style="color: #98be65;">"yellow"</span>
    <span style="color: #db5762;">highlightColor</span>=<span style="color: #98be65;">"red"</span>&gt;<span style="text-decoration: underline;">Hello World</span>&lt;/<span style="color: #c678dd;">h4</span>&gt;
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org9ce4893" class="outline-3">
<h3 id="org9ce4893"><span class="section-number-3">9.2</span> <code>Structural Directive</code> - has a leading <code>*</code> and affects the whole area in the DOM</h3>
<div class="outline-text-3" id="text-9-2">
<ul class="org-ul">
<li>example of the opposite of <code>*ngIf</code>, we create <code>appUnless</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Directive, Input, TemplateRef, ViewContainerRef <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

@Directive<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'[appUnless]'</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">UnlessDirective</span> <span style="color: #fff0f5;">{</span>
    @Input<span style="color: #c678dd;">()</span> <span style="color: #51afef; font-style: italic;">set</span> appUnless<span style="color: #c678dd;">(</span>condition: <span style="color: #51afef; font-style: italic;">boolean</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">method name here = appUnless, needs to be the same as the attribute name</span>
        <span style="color: #51afef; font-style: italic;">if</span> <span style="color: #98be65;">(</span>!condition<span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef; font-style: italic;">this</span>.vcRef.createEmbeddedView<span style="color: #00bfff;">(</span><span style="color: #51afef; font-style: italic;">this</span>.templateRef<span style="color: #00bfff;">)</span>;
        <span style="color: #98be65;">}</span> <span style="color: #51afef; font-style: italic;">else</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef; font-style: italic;">this</span>.vcRef.clear<span style="color: #00bfff;">()</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> templateRef: TemplateRef&lt;<span style="color: #51afef; font-style: italic;">any</span>&gt;, <span style="color: #51afef; font-style: italic;">private</span> vcRef: ViewContainerRef<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span> <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcdce725" class="outline-2">
<h2 id="orgcdce725"><span class="section-number-2">10</span> Custom Property Binding</h2>
<div class="outline-text-2" id="text-10">
<ul class="org-ul">
<li>allows to pass data in between components</li>
<li>first bind the variable to a new html attribute, here the variable is <code>element</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">app-component</span> *ngFor=<span style="color: #98be65;">"let eachElement of elements"</span>
               [element]=<span style="color: #98be65;">"eachElement"</span>&gt;
&lt;/<span style="color: #c678dd;">app-component</span>&gt;
</pre>
</div>

<ul class="org-ul">
<li>then receive that attribute as a variable in the <code>app-component</code> using a <code>@Input()</code> decorator</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Input<span style="color: #fff0f5;">()</span> element: <span style="color: #51afef; font-style: italic;">string</span>;
</pre>
</div>

<ul class="org-ul">
<li>remember to import the <code>Input</code> from the angular core</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Component, OnInit, Input <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
</pre>
</div>

<ul class="org-ul">
<li>create an <code>alias</code> by inserting the property name into the decorator, the html attribute needs to have the same name</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Input<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'someElement'</span><span style="color: #fff0f5;">)</span> element: <span style="color: #51afef; font-style: italic;">string</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orge39ea24" class="outline-2">
<h2 id="orge39ea24"><span class="section-number-2">11</span> Custom Events</h2>
<div class="outline-text-2" id="text-11">
<ul class="org-ul">
<li>allows to listen to custom events</li>
<li>in the html bind a function</li>
<li><code>onServerAdded</code> is the function that receives the event</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">app-component</span> (serverCreated)=<span style="color: #98be65;">"onServerAdded($event)"</span> (blueprintCreated)=<span style="color: #98be65;">"onBlueprintAdded($event)"</span>&gt;&lt;/<span style="color: #c678dd;">app-component</span>&gt;
</pre>
</div>

<ul class="org-ul">
<li>now setup properties as events in the component</li>
<li>example has two different types of emits, a string and an object</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Output<span style="color: #fff0f5;">()</span> serverCreated = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">EventEmitter</span>&lt;<span style="color: #51afef; font-style: italic;">string</span>&gt;<span style="color: #fff0f5;">()</span>;
@Output<span style="color: #fff0f5;">()</span> blueprintCreated = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">EventEmitter</span>&lt;<span style="color: #fff0f5;">{</span>serverName: <span style="color: #51afef; font-style: italic;">string</span>, serverContent: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #fff0f5;">}</span>&gt;<span style="color: #fff0f5;">()</span>;
</pre>
</div>

<ul class="org-ul">
<li>just like with the <code>@Input()</code> you can create an alias by inserting a string as parameter</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Output<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'bpCreate'</span><span style="color: #fff0f5;">)</span> serverCreated = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">EventEmitter</span>&lt;<span style="color: #51afef; font-style: italic;">string</span>&gt;<span style="color: #fff0f5;">()</span>;
</pre>
</div>

<ul class="org-ul">
<li>then you would listen with the aliased name</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">app-component</span> (bpCreated)=<span style="color: #98be65;">"onBlueprintAdded($event)"</span>&gt;&lt;/<span style="color: #c678dd;">app-component</span>&gt;
</pre>
</div>

<ul class="org-ul">
<li>emit the data by calling the emitter's methods</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">this</span>.serverCreated.emit<span style="color: #fff0f5;">(</span><span style="color: #98be65;">"Hello"</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">this</span>.blueprintCreated.emit<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>serverName: <span style="color: #98be65;">"hello"</span>, serverContent: <span style="color: #98be65;">"hello again"</span><span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>

<ul class="org-ul">
<li>remember to import the <code>EventEmitter</code> and the <code>Output</code> from the angular core</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Component, OnInit, EventEmitter, Output <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org849ceb2" class="outline-2">
<h2 id="org849ceb2"><span class="section-number-2">12</span> Custom References</h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>references hold a reference to the html element itself</li>
<li>references can be added to any html element</li>
<li>references have a scope of the local template <b>only</b></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> #myInput <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"text"</span>&gt;&lt;/<span style="color: #c678dd;">input</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>this custom reference can be then passed into a function as an argument (for example)</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> (click)=<span style="color: #98be65;">"addServer(myInput)"</span>&gt;Add&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3a3c706" class="outline-2">
<h2 id="org3a3c706"><span class="section-number-2">13</span> Access to DOM via <code>@ViewChild</code> as a native Element Ref</h2>
<div class="outline-text-2" id="text-13">
<ul class="org-ul">
<li>First use a custom reference on a html tag, eg. <code>#myCustomRef</code></li>
<li>Use the <code>@ViewChild</code> decorator to bind a html element to a TypeScript variable</li>
<li>Simply pass the custom reference as an argument to the decorator</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@ViewChild<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'myCustomRef'</span><span style="color: #fff0f5;">)</span> someElementName: ElementRef;
</pre>
</div>

<ul class="org-ul">
<li>remember to import <code>ViewChild</code> from <code>@angular/core</code></li>
<li>the type of a <code>ViewChild</code> is ElementRef, which also needs to be imported from <code>@angular/core</code> as <code>ElementRef</code></li>
<li>to gain access to an <code>ElementRef</code> just like a normal html element, you'd need to reference it via <code>nativeElement</code> first</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">inputValue: <span style="color: #51afef; font-style: italic;">string</span> = someElementName.nativeElement.value;
</pre>
</div>
</div>
</div>

<div id="outline-container-org848a726" class="outline-2">
<h2 id="org848a726"><span class="section-number-2">14</span> Inserting DOM into a component element with ng-content</h2>
<div class="outline-text-2" id="text-14">
<ul class="org-ul">
<li>normally a component element does not allow insertion of tags inside of it</li>
<li>if we have a component called <code>app-server</code> then this is not allowed (the p tag will be ignored):</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">app-server</span>&gt;
    &lt;<span style="color: #c678dd;">p</span>&gt;Some text here&lt;/<span style="color: #c678dd;">p</span>&gt;
&lt;/<span style="color: #c678dd;">app-server</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>however if we place the <code>ng-component</code> element inside of the <code>app-server</code> component then the element that inserts the <code>app-server</code> can choose what will be displayed inside of the <code>app-server</code> component</li>
</ul>
</div>
</div>

<div id="outline-container-org674f2ed" class="outline-2">
<h2 id="org674f2ed"><span class="section-number-2">15</span> Lifecycle hooks</h2>
<div class="outline-text-2" id="text-15">
<p>
It is a good practice to add any of the used hooks to the <code>imports</code> and the class' <code>implements</code>
</p>
</div>

<div id="outline-container-orgf1bea72" class="outline-3">
<h3 id="orgf1bea72"><span class="section-number-3">15.1</span> <code>ngOnChanges</code></h3>
<div class="outline-text-3" id="text-15-1">
<ul class="org-ul">
<li>executes whenever a bound property with <code>@Input</code> changes</li>
<li>is the only hook that receives an argument of type <code>SimpleChanges</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">ngOnChanges<span style="color: #fff0f5;">(</span>changes: SimpleChanges<span style="color: #fff0f5;">)</span> <span style="color: #fff0f5;">{</span>

<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>remember to import <code>SimpleChanges</code> from the <code>@angular/core</code></li>
</ul>
</div>
</div>

<div id="outline-container-org3511cdd" class="outline-3">
<h3 id="org3511cdd"><span class="section-number-3">15.2</span> <code>ngOnInit</code></h3>
<div class="outline-text-3" id="text-15-2">
<ul class="org-ul">
<li>executes once the component is initialised</li>
</ul>
</div>
</div>

<div id="outline-container-org95844a5" class="outline-3">
<h3 id="org95844a5"><span class="section-number-3">15.3</span> <code>ngDoCheck</code></h3>
<div class="outline-text-3" id="text-15-3">
<ul class="org-ul">
<li>executes whenever something changes in the template (events, inputs, re-renders, etc.)</li>
</ul>
</div>
</div>

<div id="outline-container-org1509ebf" class="outline-3">
<h3 id="org1509ebf"><span class="section-number-3">15.4</span> <code>ngAfterContentInit</code></h3>
<div class="outline-text-3" id="text-15-4">
<ul class="org-ul">
<li>executes after the <code>ng-content</code> has been projected into the view</li>
</ul>
</div>
</div>

<div id="outline-container-org5a85548" class="outline-3">
<h3 id="org5a85548"><span class="section-number-3">15.5</span> <code>ngAfterContentChecked</code></h3>
<div class="outline-text-3" id="text-15-5">
<ul class="org-ul">
<li>executes every time the <code>ng-content</code> gets checked</li>
</ul>
</div>
</div>

<div id="outline-container-orgbdec750" class="outline-3">
<h3 id="orgbdec750"><span class="section-number-3">15.6</span> <code>ngAfterViewInit</code></h3>
<div class="outline-text-3" id="text-15-6">
<ul class="org-ul">
<li>executes after the component (and all of its children) have been initialised</li>
</ul>
</div>
</div>

<div id="outline-container-org5c3c613" class="outline-3">
<h3 id="org5c3c613"><span class="section-number-3">15.7</span> <code>ngAfterViewChecked</code></h3>
<div class="outline-text-3" id="text-15-7">
<ul class="org-ul">
<li>executes after the component (and all of its children) have been checked</li>
</ul>
</div>
</div>

<div id="outline-container-orgbbef920" class="outline-3">
<h3 id="orgbbef920"><span class="section-number-3">15.8</span> <code>ngOnDestroy</code></h3>
<div class="outline-text-3" id="text-15-8">
<ul class="org-ul">
<li>executes when the component is just about to be destroyed</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org745cd9f" class="outline-2">
<h2 id="org745cd9f"><span class="section-number-2">16</span> Services</h2>
<div class="outline-text-2" id="text-16">
<ul class="org-ul">
<li>create a file with the followin pattern <code>name.service.ts</code>, or simply&#x2026;</li>
<li>use the cli <code>ng generate service servicenamehere</code></li>
</ul>
</div>

<div id="outline-container-orgf2d1f75" class="outline-3">
<h3 id="orgf2d1f75"><span class="section-number-3">16.1</span> Example on a Status Change Logging System</h3>
<div class="outline-text-3" id="text-16-1">
</div>
<ol class="org-ol">
<li><a id="org2727f5e"></a>Setup the service<br />
<div class="outline-text-4" id="text-16-1-1">
<ul class="org-ul">
<li>create a service</li>
<li><b>NOTE</b> the <code>@Injectable</code> decorator is only necessary if the service will get another service injected to it</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Injectable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

@Injectable<span style="color: #fff0f5;">()</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">PutaService</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span> <span style="color: #c678dd;">}</span>

    logStatusChange<span style="color: #c678dd;">(</span>status: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        console.log<span style="color: #98be65;">(</span>status<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org55d6540"></a>Setup the components that need the service<br />
<div class="outline-text-4" id="text-16-1-2">
<ul class="org-ul">
<li>in the components that require the service import the service with</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> LoggingService <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'logging.service'</span>;
</pre>
</div>
<ul class="org-ul">
<li>then add the service to the <code>providers</code> <code>@Component</code> decorator</li>
<li><b>WARNING</b> inserting the service through the <code>proviers</code> creates a seperate instance of the service, which might be unwelcome</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'app-recipes'</span>,
    templateUrl: <span style="color: #98be65;">'./recipes.component.html'</span>,
    styleUrls: <span style="color: #98be65;">[</span><span style="color: #98be65;">'./recipes.component.css'</span><span style="color: #98be65;">]</span>,
    providers: <span style="color: #98be65;">[</span>LoggingService<span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>then call the constructor and instatiate the Logging Service with</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #fff0f5;">(</span><span style="color: #51afef; font-style: italic;">private</span> loggingService: LoggingService<span style="color: #fff0f5;">)</span> <span style="color: #fff0f5;">{}</span>
</pre>
</div>
<ul class="org-ul">
<li>finally, use the services methods and/or variables. In here we call the <code>logStatusChange</code> method</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">this</span>.loggingService.logStatusChange<span style="color: #fff0f5;">(</span><span style="color: #98be65;">"status changed"</span><span style="color: #fff0f5;">)</span>;
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org75fb857" class="outline-3">
<h3 id="org75fb857"><span class="section-number-3">16.2</span> Using a service to pass information (events) between components</h3>
<div class="outline-text-3" id="text-16-2">
<ul class="org-ul">
<li>make sure that both the components that will use the service  have a common parent, so that the service can be shared via <code>Hierarchical Injections</code></li>
<li><b>NOTE</b> remember to import the emitter</li>
<li>create an event emitter in the service</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">statusUpdated = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">EventEmitter</span>&lt;<span style="color: #51afef; font-style: italic;">string</span>&gt;<span style="color: #fff0f5;">()</span>;
</pre>
</div>
<ul class="org-ul">
<li>now in an emitting component you can simply emit with</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">this</span>.someServiceName.statusUpdated.emit<span style="color: #fff0f5;">(</span><span style="color: #98be65;">"Some signal"</span><span style="color: #fff0f5;">)</span>;
</pre>
</div>
<ul class="org-ul">
<li>and in the receiving component <code>subscribe</code> to emitter listener in the constructor of the service (or elsewhere)</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #fff0f5;">(</span><span style="color: #51afef; font-style: italic;">private</span> someServiceName: SomeServiceName<span style="color: #fff0f5;">)</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">this</span>.someServiceName.statusUpdated.subscribe<span style="color: #c678dd;">(</span>
        <span style="color: #98be65;">(</span>status: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #98be65;">)</span> =&gt; alert<span style="color: #98be65;">(</span><span style="color: #98be65;">"incoming status"</span> + status<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">)</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0173028" class="outline-2">
<h2 id="org0173028"><span class="section-number-2">17</span> Routing</h2>
<div class="outline-text-2" id="text-17">
</div>
<div id="outline-container-orgebd0604" class="outline-3">
<h3 id="orgebd0604"><span class="section-number-3">17.1</span> Router setup</h3>
<div class="outline-text-3" id="text-17-1">
<ul class="org-ul">
<li>add the necessary imports</li>
<li>create the <code>appRoutes</code> array with the list of path</li>
<li>add the RouterModule in the <code>imports</code> of the <code>@NgModule</code></li>
<li>all above is to be created in <code>app.module.ts</code>, this file is where routing is generally set up</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Routes, RouterModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/router'</span>;
<span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">appRoutes</span>: Routes = <span style="color: #fff0f5;">[</span>
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">''</span>, component: HomeComponent <span style="color: #c678dd;">}</span>,
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">'box'</span>, component: BoxComponent <span style="color: #c678dd;">}</span>,
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">'users'</span>, component: UsersComponent <span style="color: #c678dd;">}</span>,
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">'users/:id/:name'</span>, component: UserComponent <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">]</span>;
@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    imports: <span style="color: #98be65;">[</span>
        RouterModule.forRoot<span style="color: #00bfff;">(</span>appRoutes<span style="color: #00bfff;">)</span>
    <span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>;
</pre>
</div>
<ul class="org-ul">
<li><code>path</code> is the path that will be displayed in the url</li>
<li><code>component</code> is the component that will be loaded upon arrival</li>
<li>if path hashing is required use <code>RouterModule.forRoot(appRoutes, {useHash: true})</code> instead</li>
</ul>
</div>
</div>

<div id="outline-container-orge5bfc4c" class="outline-3">
<h3 id="orge5bfc4c"><span class="section-number-3">17.2</span> Router setup with children</h3>
<div class="outline-text-3" id="text-17-2">
<ul class="org-ul">
<li>instead of repeating routes it is also possible to add child routes</li>
<li>note that instead of using repeated user routes we can nest the sub routes inside of the top-level route</li>
<li>also an another <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> tag needs to be added in the parent component of the child component for the child route to work properly</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">appRoutes</span>: Routes = <span style="color: #fff0f5;">[</span>
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">'users'</span>, component: UsersComponent, children: <span style="color: #98be65;">[</span>
        <span style="color: #00bfff;">{</span> path: <span style="color: #98be65;">':id/:name'</span>, component: UserComponent <span style="color: #00bfff;">}</span>
    <span style="color: #98be65;">]</span> <span style="color: #c678dd;">}</span>,
<span style="color: #fff0f5;">]</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b60631" class="outline-3">
<h3 id="org0b60631"><span class="section-number-3">17.3</span> Router injection into html</h3>
<div class="outline-text-3" id="text-17-3">
<ul class="org-ul">
<li>add the <code>router-outlet</code> component in the main html file, which is the <code>app.component.html</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"container"</span>&gt;
    &lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"row"</span>&gt;
        &lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"col-xs-12"</span>&gt;
            &lt;<span style="color: #c678dd;">router-outlet</span>&gt;&lt;/<span style="color: #c678dd;">router-outlet</span>&gt;
        &lt;/<span style="color: #c678dd;">div</span>&gt; <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">col-xs-12 ends here </span><span style="color: #5B6268;">--&gt;</span>
    &lt;/<span style="color: #c678dd;">div</span>&gt; <span style="color: #5B6268;">&lt;!-- </span><span style="color: #5B6268;">row ends here </span><span style="color: #5B6268;">--&gt;</span>
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orge9045df" class="outline-3">
<h3 id="orge9045df"><span class="section-number-3">17.4</span> Anchors for routing</h3>
<div class="outline-text-3" id="text-17-4">
<ul class="org-ul">
<li>use a standard <code>a</code> tag with the <code>routerLink</code> attribute</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">a</span> <span style="color: #db5762;">routerLink</span>=<span style="color: #98be65;">"/"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;<span style="color: #c678dd;">a</span> <span style="color: #db5762;">routerLink</span>=<span style="color: #98be65;">"/users"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;<span style="color: #c678dd;">a</span> [routerLink]=<span style="color: #98be65;">"['/users', 5, 'edit']"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;<span style="color: #c678dd;">a</span> [routerLink]=<span style="color: #98be65;">"['/users', 5, 'edit']"</span> [queryParams]=<span style="color: #98be65;">"{allowEdit: '1'}"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;<span style="color: #c678dd;">a</span> [routerLink]=<span style="color: #98be65;">"['/users', 5, 'edit']"</span> [fragment]=<span style="color: #98be65;">"'loading'"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>the last three example that use property binding are useful because they can be dynamically changed and are more readable than string concatenation</li>
<li>in the first <code>routerLink</code> example we basically go to url <code>/users/5/edit</code></li>
<li>in the second <code>routerLink</code> example we also add query parameters as key-value pairs, making the url look like <code>/users/5/edit?allowEdit=1</code></li>
<li>in the third <code>routerLink</code> example we add a <code>#</code> symbol and we follow it up with some value, thus making the url look like <code>/users/5/edit#loading</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgc1034ee" class="outline-3">
<h3 id="orgc1034ee"><span class="section-number-3">17.5</span> Adding a class to the active route</h3>
<div class="outline-text-3" id="text-17-5">
<ul class="org-ul">
<li>add the <code>routerLinkActive</code> attribute to inject a css class to an element</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">li</span> <span style="color: #db5762;">routerLinkActive</span>=<span style="color: #98be65;">"active"</span>
    [routerLinkActiveOptions]=<span style="color: #98be65;">"{exact: true}"</span>&gt;
    &lt;<span style="color: #c678dd;">a</span> <span style="color: #db5762;">routerLink</span>=<span style="color: #98be65;">"/"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;/<span style="color: #c678dd;">li</span>&gt;
&lt;<span style="color: #c678dd;">li</span> <span style="color: #db5762;">routerLinkActive</span>=<span style="color: #98be65;">"active"</span>&gt;
    &lt;<span style="color: #c678dd;">a</span> <span style="color: #db5762;">routerLink</span>=<span style="color: #98be65;">"/users"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;/<span style="color: #c678dd;">li</span>&gt;
&lt;<span style="color: #c678dd;">li</span> <span style="color: #db5762;">routerLinkActive</span>=<span style="color: #98be65;">"active"</span>&gt;
    &lt;<span style="color: #c678dd;">a</span> [routerLink]=<span style="color: #98be65;">"['/users']"</span>&gt;Home&lt;/<span style="color: #c678dd;">a</span>&gt;
&lt;/<span style="color: #c678dd;">li</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>adding a <code>routerLinkActiveOptions</code> attribute allows to set extra parameters</li>
<li>in this case it is set to <code>exact: true</code> which allows for the home path <code>/</code> to be evaluated only when the path is <code>/</code> <b>ONLY</b>, and <b>NOT</b> any of its subpaths</li>
</ul>
</div>
</div>

<div id="outline-container-org46d913a" class="outline-3">
<h3 id="org46d913a"><span class="section-number-3">17.6</span> Loading routes programmatically</h3>
<div class="outline-text-3" id="text-17-6">
<ul class="org-ul">
<li>import the <code>Router</code></li>
<li>instantiate the router through the constructor</li>
<li>use the <code>navigate</code> method of the router object</li>
<li>mind the fact the the <code>navigate</code> method's parameter is an array</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Router <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">SomeClass</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> router: Router<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    goToUsers<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.router.navigate<span style="color: #98be65;">(</span><span style="color: #00bfff;">[</span><span style="color: #98be65;">'/users'</span><span style="color: #00bfff;">]</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>

<ul class="org-ul">
<li>using relative paths</li>
<li>import <code>ActivatedRoute</code></li>
<li>instantiate the active route through the constructor</li>
<li>and pass in second parameter to the <code>navigate</code> method as follows</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Router, ActivatedRoute <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">SomeClass</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> router: Router, <span style="color: #51afef; font-style: italic;">private</span> route: ActivatedRoute<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    goToUsers<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.router.navigate<span style="color: #98be65;">(</span><span style="color: #00bfff;">[</span><span style="color: #98be65;">'users'</span>, <span style="color: #a9a1e1;">{</span>relativeTo: <span style="color: #51afef; font-style: italic;">this</span>.route<span style="color: #a9a1e1;">}</span><span style="color: #00bfff;">]</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>additional parameters inside of the navigate arguments, here we add <code>queryParams</code> and <code>fragment</code>, just like in the html <code>a</code> tag attribute explained above</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">this</span>.router.navigate<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">[</span><span style="color: #98be65;">'users'</span>, <span style="color: #98be65;">{</span>queryParams: <span style="color: #00bfff;">{</span>allowEdit: 1<span style="color: #00bfff;">}</span><span style="color: #98be65;">}</span>, fragment: <span style="color: #98be65;">'loading'</span><span style="color: #c678dd;">]</span><span style="color: #fff0f5;">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4150ebd" class="outline-3">
<h3 id="org4150ebd"><span class="section-number-3">17.7</span> Retrieving parameters from the url via a snapshot</h3>
<div class="outline-text-3" id="text-17-7">
<ul class="org-ul">
<li>this example assumes that <code>{ path: 'users/:id/:name', component: UserComponent }</code> is setup in the path</li>
<li>this example will setup the <code>user</code> variable <b>ONLY</b> on load</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Router, ActivatedRoute <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">SomeClass</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> router: Router, <span style="color: #51afef; font-style: italic;">private</span> route: ActivatedRoute<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>
    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.user = <span style="color: #98be65;">{</span>
            id: <span style="color: #51afef; font-style: italic;">this</span>.route.snapshot.params<span style="color: #00bfff;">[</span><span style="color: #98be65;">'id'</span><span style="color: #00bfff;">]</span>,
            name: <span style="color: #51afef; font-style: italic;">this</span>.route.snapshot.params<span style="color: #00bfff;">[</span><span style="color: #98be65;">'name'</span><span style="color: #00bfff;">]</span>
        <span style="color: #98be65;">}</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">getting queryParams and fragments</span>
        queryParams: <span style="color: #51afef; font-style: italic;">string</span> = <span style="color: #51afef; font-style: italic;">this</span>.route.snapshot.queryParams;
        fragment: <span style="color: #51afef; font-style: italic;">string</span> = <span style="color: #51afef; font-style: italic;">this</span>.route.snapshot.fragment;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbefad29" class="outline-3">
<h3 id="orgbefad29"><span class="section-number-3">17.8</span> Retrieving parameters via observables</h3>
<div class="outline-text-3" id="text-17-8">
<ul class="org-ul">
<li>in the <code>ngOnInit</code> subscribe to the <code>params</code> observable from the <code>ActivatedRoute</code> module</li>
<li>you can also subscribe to receive query parameters and fragments</li>
<li>remember to import <code>Params</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Params <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/router'</span>;

<span style="color: #51afef; font-style: italic;">this</span>.route.params.subscribe<span style="color: #fff0f5;">(</span>
    <span style="color: #c678dd;">(</span>params: Params<span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.user.id = params<span style="color: #98be65;">[</span><span style="color: #98be65;">'id'</span><span style="color: #98be65;">]</span>;
        <span style="color: #51afef; font-style: italic;">this</span>.user.name = params<span style="color: #98be65;">[</span><span style="color: #98be65;">'name'</span><span style="color: #98be65;">]</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">)</span>
<span style="color: #5B6268;">// </span><span style="color: #5B6268;">getting queryParams and fragments</span>
<span style="color: #51afef; font-style: italic;">this</span>.route.queryParams.subscribe<span style="color: #fff0f5;">(</span>
    <span style="color: #c678dd;">(</span>params: Params<span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.someVar = queryParams;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">this</span>.route.fragment.subscribe<span style="color: #fff0f5;">(</span>
    <span style="color: #c678dd;">(</span>params: Params<span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.someVar = fragment;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3fe61c4" class="outline-3">
<h3 id="org3fe61c4"><span class="section-number-3">17.9</span> Setting up redirection, like 404</h3>
<div class="outline-text-3" id="text-17-9">
<ul class="org-ul">
<li>redirection to some arbitrary component</li>
<li>in this case we setup a PageNotFoundComponent to handle the 404 pages</li>
<li>then as the <b>LAST</b> path we use a double asterisk <code>**</code> to handle all possible paths</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">appRoutes</span>: Routes = <span style="color: #fff0f5;">[</span>
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">'not-found'</span>, component: PageNotFoundComponent<span style="color: #c678dd;">}</span>,
    <span style="color: #c678dd;">{</span> path: <span style="color: #98be65;">'**'</span>, redirectTo: <span style="color: #98be65;">'/not-found'</span><span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">]</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org8560831" class="outline-3">
<h3 id="org8560831"><span class="section-number-3">17.10</span> Guards</h3>
<div class="outline-text-3" id="text-17-10">
<ul class="org-ul">
<li>Consider putting guards in their respective modules</li>
<li>Guards allow to run code before a route is being resolved or after a route is being left</li>
<li>Create a new service eg. <code>auth-guard.service.ts</code></li>
<li>Remember to add the services in the <code>providers</code> section in the module configuration</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/router'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Injectable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Observable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Observable'</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">might not be needed if we want to just return a boolean</span>

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> AuthService <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./auth.service'</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">fake authorisation service</span>

@Injectable<span style="color: #fff0f5;">()</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AuthGuard</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">CanActivate</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> authService: AuthService, <span style="color: #51afef; font-style: italic;">private</span> router: Router<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    canActivate<span style="color: #c678dd;">(</span>route: ActivatedRouteSnapshot,
                state: RouterStateSnapshot<span style="color: #c678dd;">)</span>: Observable&lt;<span style="color: #51afef; font-style: italic;">boolean</span>&gt; | Promise&lt;<span style="color: #51afef; font-style: italic;">boolean</span>&gt; | <span style="color: #51afef; font-style: italic;">boolean</span> <span style="color: #c678dd;">{</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">should always return an observable(if with timeout), a Promise or simply a boolean</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.authService.isAuthenticated<span style="color: #98be65;">()</span>.then<span style="color: #98be65;">(</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">check the promise from the fake auth service</span>
            <span style="color: #00bfff;">(</span>authenticated: <span style="color: #51afef; font-style: italic;">boolean</span><span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                <span style="color: #51afef; font-style: italic;">if</span> <span style="color: #a9a1e1;">(</span>authenticated<span style="color: #a9a1e1;">)</span> <span style="color: #a9a1e1;">{</span>
                    <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">true</span>;
                <span style="color: #a9a1e1;">}</span> <span style="color: #51afef; font-style: italic;">else</span> <span style="color: #a9a1e1;">{</span>
                    <span style="color: #51afef; font-style: italic;">this</span>.router.navigate<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">[</span><span style="color: #98be65;">'/'</span><span style="color: #4db5bd;">]</span><span style="color: #32cd32;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">navigate home if not authenticated</span>
                <span style="color: #a9a1e1;">}</span>
            <span style="color: #00bfff;">}</span>
        <span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>Create a <code>canActivate</code> key-value pair in the routes configuration and pass in the required guard service</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #fff0f5;">{</span> path: <span style="color: #98be65;">'box'</span>, canActivate: <span style="color: #c678dd;">[</span>AuthGuard<span style="color: #c678dd;">]</span>, component: BoxComponent <span style="color: #fff0f5;">}</span>,
</pre>
</div>
<ul class="org-ul">
<li>Note that the <code>canActivate</code> key takes in an array</li>
</ul>
</div>
</div>

<div id="outline-container-org1c8ec7d" class="outline-3">
<h3 id="org1c8ec7d"><span class="section-number-3">17.11</span> Guards for child paths</h3>
<div class="outline-text-3" id="text-17-11">
<ul class="org-ul">
<li>it is the exact same thing as above, except for the <code>CanActivateChild</code> methods and interface implementations</li>
<li>keep in mind that now in the router configuration the <code>canActivate</code> key needs to be placed in the nested routes or use <code>canActivateChild</code> in the parent which will can handle both cases</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> CanActivate, CanActivateChild, ActivatedRouteSnapshot, RouterStateSnapshot, Router <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/router'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Injectable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Observable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Observable'</span>;

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> AuthService <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./auth.service'</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">fake authorisation service</span>

@Injectable<span style="color: #fff0f5;">()</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AuthGuard</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">CanActivate</span>, CanActivateChild <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> authService: AuthService, <span style="color: #51afef; font-style: italic;">private</span> router: Router<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    canActivate<span style="color: #c678dd;">(</span>route: ActivatedRouteSnapshot,
                state: RouterStateSnapshot<span style="color: #c678dd;">)</span>: Observable&lt;<span style="color: #51afef; font-style: italic;">boolean</span>&gt; | Promise&lt;<span style="color: #51afef; font-style: italic;">boolean</span>&gt; | <span style="color: #51afef; font-style: italic;">boolean</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.authService.isAuthenticated<span style="color: #98be65;">()</span>.then<span style="color: #98be65;">(</span>
            <span style="color: #00bfff;">(</span>authenticated: <span style="color: #51afef; font-style: italic;">boolean</span><span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                <span style="color: #51afef; font-style: italic;">if</span> <span style="color: #a9a1e1;">(</span>authenticated<span style="color: #a9a1e1;">)</span> <span style="color: #a9a1e1;">{</span>
                    <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">true</span>;
                <span style="color: #a9a1e1;">}</span> <span style="color: #51afef; font-style: italic;">else</span> <span style="color: #a9a1e1;">{</span>
                    <span style="color: #51afef; font-style: italic;">this</span>.router.navigate<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">[</span><span style="color: #98be65;">'/'</span><span style="color: #4db5bd;">]</span><span style="color: #32cd32;">)</span>;
                <span style="color: #a9a1e1;">}</span>
            <span style="color: #00bfff;">}</span>
        <span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">}</span>

    canActivateChild<span style="color: #c678dd;">(</span>route: ActivatedRouteSnapshot,
                     state: RouterStateSnapshot<span style="color: #c678dd;">)</span>: Observable&lt;<span style="color: #51afef; font-style: italic;">boolean</span>&gt; | Promise&lt;<span style="color: #51afef; font-style: italic;">boolean</span>&gt; | <span style="color: #51afef; font-style: italic;">boolean</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.canActivate<span style="color: #98be65;">()</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd203eac" class="outline-2">
<h2 id="orgd203eac"><span class="section-number-2">18</span> Observables</h2>
<div class="outline-text-2" id="text-18">
<ul class="org-ul">
<li>Handles asynchronous tasks, observables are basically Promises.</li>
<li>Refer to <a href="http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html">rxjs Observables docs</a> for more information</li>
</ul>
</div>

<div id="outline-container-org44aa65a" class="outline-3">
<h3 id="org44aa65a"><span class="section-number-3">18.1</span> Handling</h3>
<div class="outline-text-3" id="text-18-1">
<ul class="org-ul">
<li>Handle Data</li>
<li>Handle Error</li>
<li>Handle Completion</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">observable
    .subscribe<span style="color: #fff0f5;">(</span>
        <span style="color: #c678dd;">()</span> =&gt; <span style="color: #c678dd;">{</span>
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">on success</span>
        <span style="color: #c678dd;">}</span>,
        <span style="color: #c678dd;">()</span> =&gt; <span style="color: #c678dd;">{</span>
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">on error</span>
        <span style="color: #c678dd;">}</span>,
        <span style="color: #c678dd;">()</span> =&gt; <span style="color: #c678dd;">{</span>
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">on finish</span>
        <span style="color: #c678dd;">}</span>
    <span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd8445f5" class="outline-3">
<h3 id="orgd8445f5"><span class="section-number-3">18.2</span> Making a simple timer observable</h3>
<div class="outline-text-3" id="text-18-2">
<ul class="org-ul">
<li>Remember the imports</li>
<li>myNumbers observal in this case uses the interval method and will emit every 1000ms</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Observable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Observable'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #98be65;">'rxjs/Rx'</span>;

<span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">myNumbers</span> = Observable.interval<span style="color: #fff0f5;">(</span>1000<span style="color: #fff0f5;">)</span>;

myNumbers.subscribe<span style="color: #fff0f5;">(</span>
    <span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">number</span>: <span style="color: #51afef; font-style: italic;">number</span><span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span>
        console.log<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">number</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org455387f" class="outline-3">
<h3 id="org455387f"><span class="section-number-3">18.3</span> Creating an observable from scratch</h3>
<div class="outline-text-3" id="text-18-3">
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Observable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Observable'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Observer <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Observer'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #98be65;">'rxjs/Rx'</span>;

<span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">myObservable</span> = Observable.create<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">(</span>observer: Observer&lt;<span style="color: #51afef; font-style: italic;">string</span>&gt;<span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span>
    setTimeout<span style="color: #98be65;">(</span><span style="color: #00bfff;">()</span> =&gt; <span style="color: #00bfff;">{</span>
        observer.next<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'first package'</span><span style="color: #a9a1e1;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">pass any data, in this case a string</span>
    <span style="color: #00bfff;">}</span>, 2000<span style="color: #98be65;">)</span>;
    setTimeout<span style="color: #98be65;">(</span><span style="color: #00bfff;">()</span> =&gt; <span style="color: #00bfff;">{</span>
        observer.next<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'second package'</span><span style="color: #a9a1e1;">)</span>;
    <span style="color: #00bfff;">}</span>, 4000<span style="color: #98be65;">)</span>;
    setTimeout<span style="color: #98be65;">(</span><span style="color: #00bfff;">()</span> =&gt; <span style="color: #00bfff;">{</span>
        observer.error<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'this does not work'</span><span style="color: #a9a1e1;">)</span>;
    <span style="color: #00bfff;">}</span>, 5000<span style="color: #98be65;">)</span>;
    setTimeout<span style="color: #98be65;">(</span><span style="color: #00bfff;">()</span> =&gt; <span style="color: #00bfff;">{</span>
        observer.complete<span style="color: #a9a1e1;">()</span>;
    <span style="color: #00bfff;">}</span>, 8000<span style="color: #98be65;">)</span>;
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>;

myObservable
    .subscribe<span style="color: #fff0f5;">(</span>
        <span style="color: #c678dd;">(</span>data: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span> console.log<span style="color: #98be65;">(</span>data<span style="color: #98be65;">)</span>; <span style="color: #c678dd;">}</span>,
        <span style="color: #c678dd;">(</span>error: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span> console.log<span style="color: #98be65;">(</span>error<span style="color: #98be65;">)</span>; <span style="color: #c678dd;">}</span>,
        <span style="color: #c678dd;">()</span> =&gt; <span style="color: #c678dd;">{</span> console.log<span style="color: #98be65;">(</span><span style="color: #98be65;">"Completed"</span><span style="color: #98be65;">)</span>; <span style="color: #c678dd;">}</span>
    <span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org437ac97" class="outline-3">
<h3 id="org437ac97"><span class="section-number-3">18.4</span> Removing custom observables</h3>
<div class="outline-text-3" id="text-18-4">
<ul class="org-ul">
<li>User made observables persists, clean them up with <code>OnDestroy</code>, otherwise a memory leak occurs</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> OnInit, OnDestroy <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">obsModule</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span>, OnDestroy <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">myNumbers</span> = Observable.interval;

    myNumbers.subscribe<span style="color: #c678dd;">(</span>
        <span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">number</span>: <span style="color: #51afef; font-style: italic;">number</span><span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">{</span>
            console.log<span style="color: #00bfff;">(</span><span style="color: #51afef; font-style: italic;">number</span><span style="color: #00bfff;">)</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">)</span>

    ngOnDestroy<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.myNumbers.unsubscribe<span style="color: #98be65;">()</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org448a3cf" class="outline-3">
<h3 id="org448a3cf"><span class="section-number-3">18.5</span> <code>Subject</code> observable</h3>
<div class="outline-text-3" id="text-18-5">
<ul class="org-ul">
<li>Is especially useful in cross-module communication</li>
<li><code>Subject</code> can be used as an observable and an observer in one object</li>
<li>One of the easiest ways is to create a service:</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Subject <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Subject'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">SubjectService</span> <span style="color: #fff0f5;">{</span>
    subjectActivated = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">Subject</span><span style="color: #c678dd;">()</span>:
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>Then you can simply use <code>next()</code> and <code>subscribe()</code> to either push or retrieve data</li>
<li>Also available are the <code>error()</code> and <code>complete()</code></li>
<li>Dont forget to avoid creating a memory leak and <code>unsubscribe</code> from the observable when its not used anymore</li>
</ul>
</div>
</div>

<div id="outline-container-org100bbfc" class="outline-3">
<h3 id="org100bbfc"><span class="section-number-3">18.6</span> Observable operators</h3>
<div class="outline-text-3" id="text-18-6">
<ul class="org-ul">
<li>used to transform the incoming data, for example in <code>interval</code>, one can simply use the <code>map</code> method to manipulate the data. There are a lot of different operators available.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgfe0026e" class="outline-2">
<h2 id="orgfe0026e"><span class="section-number-2">19</span> Forms</h2>
<div class="outline-text-2" id="text-19">
</div>
<div id="outline-container-orgad976ff" class="outline-3">
<h3 id="orgad976ff"><span class="section-number-3">19.1</span> Types</h3>
<div class="outline-text-3" id="text-19-1">
<ul class="org-ul">
<li><b>Template-driven</b>: Angular infers the Form Object from the DOM</li>
<li><b>Reactive</b>: Provides greater control, Form is created programmatically and synchronized with the DOM</li>
</ul>
</div>
</div>

<div id="outline-container-org858d11e" class="outline-3">
<h3 id="org858d11e"><span class="section-number-3">19.2</span> Template driven approach</h3>
<div class="outline-text-3" id="text-19-2">
</div>
<ol class="org-ol">
<li><a id="org1a7f06d"></a>Setup<br />
<div class="outline-text-4" id="text-19-2-1">
<ul class="org-ul">
<li>in the <code>app.module.ts</code> import <code>FormsModule</code>, remember to add it to the <code>@NgModule</code> decorator</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> FormsModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/forms'</span>;

@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    declarations: <span style="color: #98be65;">[</span>
        AppComponent
    <span style="color: #98be65;">]</span>,
    imports: <span style="color: #98be65;">[</span>
        BrowserModule,
        FormsModule,
        HttpModule
    <span style="color: #98be65;">]</span>,
    providers: <span style="color: #98be65;">[]</span>,
    bootstrap: <span style="color: #98be65;">[</span>AppComponent<span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>this import will automatically detect any <code>form</code> tags, however, controls still need to be declared in Angular</li>
<li>add the <code>ngModel</code> attribute (directive) to any <code>input</code> tag to tell Angular that this tag is a control, also add the <code>name</code> attribute to make controls unique and thus identifiable</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"text"</span> <span style="color: #db5762;">name</span>=<span style="color: #98be65;">"firstname"</span> <span style="color: #db5762;">value</span>=<span style="color: #98be65;">""</span> ngModel&gt;
</pre>
</div>
<ul class="org-ul">
<li><code>form</code> tag should look as follows</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">form</span> (ngSubmit)=<span style="color: #98be65;">"onSubmit(f)"</span> #f=<span style="color: #98be65;">"ngForm"</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>receive the data in TS via the <code>NgForm</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> NgForm <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/forms'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #fff0f5;">{</span>

    onSubmit<span style="color: #c678dd;">(</span>form: NgForm<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        console.log<span style="color: #98be65;">(</span>form<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>the <code>form</code> variable in TS will have a <code>value</code> property with the form's values</li>
<li>some other interesting properties are: dirty, disabled, enabled, errors, invalid, valid, untouched, touched</li>
</ul>
</div>
</li>

<li><a id="org5d34df0"></a>Template driven setup without passing the form to the <code>onSubmit</code> for live viewing<br />
<div class="outline-text-4" id="text-19-2-2">
<ul class="org-ul">
<li>in the <code>form</code> tag, do not pass f to the onSubmit</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">form</span> (ngSubmit)=<span style="color: #98be65;">"onSubmit()"</span> #f=<span style="color: #98be65;">"ngForm"</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>in TS capture the data via the <code>@ViewChild</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Component, ViewChild <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/forms'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> NgForm <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/forms'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #fff0f5;">{</span>
    @ViewChild<span style="color: #c678dd;">(</span><span style="color: #98be65;">'f'</span><span style="color: #c678dd;">)</span> signupForm: NgFrom;

    onSubmit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        console.log<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">this</span>.signupForm<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>this approach allows accesing the form data at any time</li>
<li>this approach also allows to set the data with the <code>setValue</code> method</li>
<li><code>setValue</code> method accepts an object with key value pairs that correspond to the <code>name</code> attributes in the HTML</li>
<li>the downside is that it needs to set <b>ALL</b> of the form controls</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">suggestUserName<span style="color: #fff0f5;">()</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">this</span>.signupForm.setValue<span style="color: #c678dd;">(</span><span style="color: #98be65;">{</span>
        username: <span style="color: #98be65;">'Suggested name'</span>
        ...other control...
        ...other control...
        ...other control...
    <span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>to individually set controls use the <code>patchValue</code> method</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">suggestUserName<span style="color: #fff0f5;">()</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">this</span>.signupForm.form.patchValue<span style="color: #c678dd;">(</span><span style="color: #98be65;">{</span>
        username: <span style="color: #98be65;">'Suggested name'</span>
    <span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org3ef5c10"></a>Validation<br />
<div class="outline-text-4" id="text-19-2-3">
<ul class="org-ul">
<li>add <code>required</code> to any input that needs validation</li>
<li>add a directive to any specific validations necessary such as: <code>email</code>, <code>pattern</code>, <code>minLength</code>, <code>maxLength</code>, <code>null</code>, <code>min</code>, <code>max</code></li>
<li>take advantage of automatically added CSS classes to elements such as: <code>ng-dirty</code>, <code>ng-touched</code>, <code>ng-valid</code>, <code>ng-invalid</code></li>
<li>it is also possible to enable HTML5 validation with <code>ngNativeValidate</code> which is disabled by default</li>
</ul>
</div>
</li>

<li><a id="orgfa590fe"></a>Example of using the Form State<br />
<div class="outline-text-4" id="text-19-2-4">
<ul class="org-ul">
<li>variable <code>f</code> is the form via <code>#f="ngForm"</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">button</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"btn btn-primary"</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"submit"</span> [disabled]=<span style="color: #98be65;">"!f.valid"</span>&gt;Submit&lt;/<span style="color: #c678dd;">button</span>&gt;
</pre>
</div>
</div>
</li>

<li><a id="org8d2aec0"></a>Styling invalid inputs<br />
<div class="outline-text-4" id="text-19-2-5">
<ul class="org-ul">
<li>the easiest way of achievieng this is by using a CSS entry</li>
<li>this approach styles the <code>input</code> tag only when the box has been touched <b>AND</b> is invalid</li>
</ul>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #51afef;">input.ng-invalid.ng-touched </span><span style="color: #fff0f5;">{</span>
    <span style="color: #98be65;">border</span>: 1px solid <span style="color: #ffffff; background-color: #ff0000;">red</span>;
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org71d7132"></a>Outputting error in validation<br />
<div class="outline-text-4" id="text-19-2-6">
<ul class="org-ul">
<li>add a reference with <code>#email</code></li>
<li>the <code>span</code> element now will only show up when the input is invalid <b>AND</b> has been touched</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"email"</span> <span style="color: #db5762;">name</span>=<span style="color: #98be65;">"email"</span> required email ngModel #email=<span style="color: #98be65;">"ngModel"</span>&gt;
&lt;<span style="color: #c678dd;">span</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"help-block"</span> *ngIf=<span style="color: #98be65;">"!email.valid &amp;&amp; email.touched"</span>&gt;Please enter a valid email&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
</div>
</li>

<li><a id="org59e2985"></a>Default values<br />
<div class="outline-text-4" id="text-19-2-7">
<ul class="org-ul">
<li>bind <code>ngModel</code> with property binding <code>[ngModel]="variable"=</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"email"</span> <span style="color: #db5762;">name</span>=<span style="color: #98be65;">"email"</span> required email [ngModel]=<span style="color: #98be65;">"defaultEmail"</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>in TS create a variable to hold the info</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">defaultEmail: <span style="color: #51afef; font-style: italic;">string</span> = <span style="color: #98be65;">"j.doe@gmail.com"</span>;
</pre>
</div>
</div>
</li>

<li><a id="orge35df9a"></a>Two way binding with input values<br />
<div class="outline-text-4" id="text-19-2-8">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">textarea</span> <span style="color: #db5762;">name</span>=<span style="color: #98be65;">"questionAnswer"</span> <span style="color: #db5762;">rows</span>=<span style="color: #98be65;">"3"</span> [(ngModel)]=<span style="color: #98be65;">"answer"</span>&gt;&lt;/<span style="color: #c678dd;">textarea</span>&gt;
&lt;<span style="color: #c678dd;">p</span>&gt; {{ answer }}&lt;/<span style="color: #c678dd;">p</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>in TS</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">answer = <span style="color: #98be65;">''</span>;
</pre>
</div>
</div>
</li>

<li><a id="org62679b6"></a>Grouping form controls<br />
<div class="outline-text-4" id="text-19-2-9">
<ul class="org-ul">
<li>wrap any desired controls in a <code>div</code> and add the <code>ngModelGroup</code> directive</li>
<li>local ref reference with <code>#</code> is optional</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">ngModelGroup</span>=<span style="color: #98be65;">"userData"</span> #userData=<span style="color: #98be65;">"ngModelGroup"</span>&gt;
...control...
...control...
...control...
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>this approach adds nested object called <code>userData</code> to the <code>values</code> form property. Also adds nested validation etc.</li>
</ul>
</div>
</li>

<li><a id="org1baea2a"></a>Radio buttons<br />
<div class="outline-text-4" id="text-19-2-10">
<ul class="org-ul">
<li>example on genders</li>
<li>in TS</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">genders = <span style="color: #fff0f5;">[</span><span style="color: #98be65;">'male'</span>, <span style="color: #98be65;">'female'</span><span style="color: #fff0f5;">]</span>;
</pre>
</div>
<ul class="org-ul">
<li>in HTML</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"radio"</span> *ngFor=<span style="color: #98be65;">"let gender of genders"</span>&gt;
    &lt;<span style="color: #c678dd;">label</span>&gt;
        &lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">name</span>=<span style="color: #98be65;">"gender"</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"radio"</span> [value]=<span style="color: #98be65;">"gender"</span> ngModel&gt;
        {{ gender }}
    &lt;/<span style="color: #c678dd;">label</span>&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>also can add <code>required</code> and/or default values with <code>checked</code> HTML property, etc.</li>
</ul>
</div>
</li>

<li><a id="orgea83099"></a>Resetting the form<br />
<div class="outline-text-4" id="text-19-2-11">
<ul class="org-ul">
<li>when using the form element and binding it with <code>@ViewChild</code> simply call the reset method on the form</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@ViewChild<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'f'</span><span style="color: #fff0f5;">)</span> signupForm: NgFrom;

resetForm<span style="color: #fff0f5;">()</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">this</span>.signupForm.reset<span style="color: #c678dd;">()</span>;
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-orge12b668" class="outline-3">
<h3 id="orge12b668"><span class="section-number-3">19.3</span> Reactive driven approach</h3>
<div class="outline-text-3" id="text-19-3">
</div>
<ol class="org-ol">
<li><a id="orgab0f38c"></a>Setup<br />
<div class="outline-text-4" id="text-19-3-1">
<ul class="org-ul">
<li>add reactive form module to <code>app.module.ts</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> ReactiveFormsModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/forms'</span>;

@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    declarations: <span style="color: #98be65;">[</span>
        AppComponent
    <span style="color: #98be65;">]</span>,
    imports: <span style="color: #98be65;">[</span>
        BrowserModule,
        HttpModule,
        ReactiveFormsModule
    <span style="color: #98be65;">]</span>,
    providers: <span style="color: #98be65;">[]</span>,
    bootstrap: <span style="color: #98be65;">[</span>AppComponent<span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>basic TS setup</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Component, OnInit <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> FormControl, FormGroup, Validators <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/forms'</span>;

@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'app-root'</span>,
    templateUrl: <span style="color: #98be65;">'./app.component.html'</span>,
    styleUrls: <span style="color: #98be65;">[</span><span style="color: #98be65;">'./app.component.css'</span><span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span> <span style="color: #fff0f5;">{</span>
    genders = <span style="color: #c678dd;">[</span><span style="color: #98be65;">'male'</span>, <span style="color: #98be65;">'female'</span><span style="color: #c678dd;">]</span>;
    signupForm: FormGroup;

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.signupForm = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">FormGroup</span><span style="color: #98be65;">()</span> <span style="color: #98be65;">(</span><span style="color: #00bfff;">{</span>
            <span style="color: #98be65;">'username'</span>: <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">FormControl</span><span style="color: #a9a1e1;">(</span><span style="color: #51afef; font-style: italic;">null</span>, Validators.required<span style="color: #a9a1e1;">)</span>,
            <span style="color: #98be65;">'email'</span>: <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">FormControl</span><span style="color: #a9a1e1;">(</span><span style="color: #51afef; font-style: italic;">null</span>, <span style="color: #32cd32;">[</span>Validators.required, Validators.email<span style="color: #32cd32;">]</span><span style="color: #a9a1e1;">)</span>,
            <span style="color: #98be65;">'gender'</span>: <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">FormControl</span><span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'male'</span><span style="color: #a9a1e1;">)</span>
        <span style="color: #00bfff;">}</span><span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">}</span>

    onSubmit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        console.log<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">this</span>.signupForm<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>html setup</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">form</span> [formGroup]=<span style="color: #98be65;">"signupForm"</span> (ngSubmit)=<span style="color: #98be65;">"onSubmit()"</span>=&gt;
    &lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"text"</span> <span style="color: #db5762;">id</span>=<span style="color: #98be65;">"username"</span> <span style="color: #db5762;">formControlName</span>=<span style="color: #98be65;">"username"</span>&gt;
    &lt;<span style="color: #c678dd;">span</span> *ngIf=<span style="color: #98be65;">"!signupForm.get('username').valid &amp;&amp; signupForm.get('username').touched"</span>&gt;Please enter a valid username&lt;/<span style="color: #c678dd;">span</span>&gt;
    &lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"email"</span> <span style="color: #db5762;">id</span>=<span style="color: #98be65;">"username"</span> <span style="color: #db5762;">formControlName</span>=<span style="color: #98be65;">"email"</span>&gt;
    &lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"radio"</span> *ngFor=<span style="color: #98be65;">"let gender of genders"</span>&gt;
        &lt;<span style="color: #c678dd;">label</span>&gt;
            &lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">name</span>=<span style="color: #98be65;">"gender"</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"radio"</span> [value]=<span style="color: #98be65;">"gender"</span> <span style="color: #db5762;">formControlName</span>=<span style="color: #98be65;">"gender"</span>&gt;
            {{ gender }}
        &lt;/<span style="color: #c678dd;">label</span>&gt;
    &lt;/<span style="color: #c678dd;">div</span>&gt;
&lt;/<span style="color: #c678dd;">form</span>&gt;
</pre>
</div>
</div>
</li>

<li><a id="org2b1f441"></a>Arrays of controls<br />
<div class="outline-text-4" id="text-19-3-2">
<ul class="org-ul">
<li>Reactive approach has an option to create multiple controls from an array dynamically</li>
</ul>
</div>
</li>

<li><a id="org67bfab7"></a>Error codes<br />
<div class="outline-text-4" id="text-19-3-3">
<ul class="org-ul">
<li>Individual fields can also respond to certain types of errors only during validation</li>
</ul>
</div>
</li>

<li><a id="org48eeefc"></a>Asynchronous Validation<br /></li>

<li><a id="orgb04d6e9"></a>Reacting to value changes<br /></li>
</ol>
</div>

<div id="outline-container-org952b446" class="outline-3">
<h3 id="org952b446"><span class="section-number-3">19.4</span> File upload</h3>
<div class="outline-text-3" id="text-19-4">
<ul class="org-ul">
<li>Add the following to the html part of the component</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"file"</span> #fileUpload<span style="color: #98be65;">"&gt;</span>
</pre>
</div>
<ul class="org-ul">
<li>Or the following to react to the file upload instantly</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">input</span> <span style="color: #db5762;">type</span>=<span style="color: #98be65;">"file"</span> #fileUpload<span style="color: #98be65;">" (change)="</span>upload()<span style="color: #98be65;">"&gt;</span>
</pre>
</div>
<ul class="org-ul">
<li>And retrieve the file in TS as follows</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@ViewChild<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'fileUpload'</span><span style="color: #fff0f5;">)</span> fileInput: ElementRef;

<span style="color: #51afef; font-style: italic;">async</span> upload<span style="color: #fff0f5;">()</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">files</span>: FileList = <span style="color: #51afef; font-style: italic;">this</span>.fileInput.nativeElement.files;

    <span style="color: #51afef; font-style: italic;">if</span> <span style="color: #c678dd;">(</span>files.length === 0<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">do something</span>
    <span style="color: #c678dd;">}</span>

    <span style="color: #51afef; font-style: italic;">let</span> <span style="color: #db5762;">formData</span> = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">FormData</span><span style="color: #c678dd;">()</span>;
    formData.append<span style="color: #c678dd;">(</span><span style="color: #98be65;">'file'</span>, files<span style="color: #98be65;">[</span>0<span style="color: #98be65;">]</span><span style="color: #c678dd;">)</span>;
    formData.append<span style="color: #c678dd;">(</span><span style="color: #98be65;">'title'</span>, <span style="color: #98be65;">"Hello World"</span><span style="color: #c678dd;">)</span>;

    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">send the form to the service for posting</span>
    <span style="color: #51afef; font-style: italic;">let</span> <span style="color: #db5762;">result</span> = <span style="color: #51afef; font-style: italic;">await</span> <span style="color: #51afef; font-style: italic;">this</span>.service.create<span style="color: #c678dd;">(</span>formData<span style="color: #c678dd;">)</span>;
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org513cff4" class="outline-2">
<h2 id="org513cff4"><span class="section-number-2">20</span> Pipes</h2>
<div class="outline-text-2" id="text-20">
<ul class="org-ul">
<li>Transform the output in a template. Usually via string interpolation.</li>
<li>create with <code>ng c p</code></li>
</ul>
</div>

<div id="outline-container-orga116b35" class="outline-3">
<h3 id="orga116b35"><span class="section-number-3">20.1</span> <a href="https://angular.io/api?query=pipe">List of pipes</a></h3>
</div>

<div id="outline-container-org1ddc9df" class="outline-3">
<h3 id="org1ddc9df"><span class="section-number-3">20.2</span> Simple examples</h3>
<div class="outline-text-3" id="text-20-2">
</div>
<ol class="org-ol">
<li><a id="org4288eb6"></a>Upercase pipe<br />
<div class="outline-text-4" id="text-20-2-1">
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | uppercase }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
</div>
</li>

<li><a id="orge197a2d"></a>Date pipe<br />
<div class="outline-text-4" id="text-20-2-2">
<ul class="org-ul">
<li>Simplified date output</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | date }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>Configuring the date pipe</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | date:'fullDate' }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li><a href="https://angular.io/api/common/DatePipe">Date Pipe Docs</a></li>
</ul>
</div>
</li>

<li><a id="org20d26f4"></a>JSON pipe<br />
<div class="outline-text-4" id="text-20-2-3">
<ul class="org-ul">
<li>useful for debugging objects</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | json }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
</div>
</li>

<li><a id="org3715067"></a>Chaining pipes<br />
<div class="outline-text-4" id="text-20-2-4">
<ul class="org-ul">
<li>convert the date, then uppercase it</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | date:'fullDate' | uppercase }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org9c4a07f" class="outline-3">
<h3 id="org9c4a07f"><span class="section-number-3">20.3</span> Custom pipes</h3>
<div class="outline-text-3" id="text-20-3">
<ul class="org-ul">
<li>create a file in the app folder, something meaningful, like a shortener pipe <code>shorten.pipe.ts</code></li>
<li>declare the pipe's name in the <code>@Pipe</code> decorator</li>
<li><code>pure</code> key in the decorator can be used when the pipe needs to be update when the data that is being piped changes (like an array of items). Usually you might want to avoid this as it is performance heavy and a better option is to reload the data manually.</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Pipe, PipeTransform <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

@Pipe<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    name: <span style="color: #98be65;">'shorten'</span>,
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">pure: false</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">ShortenPipe</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">PipeTransform</span> <span style="color: #fff0f5;">{</span>

    transfrom<span style="color: #c678dd;">(</span>value: <span style="color: #51afef; font-style: italic;">any</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">plus any other arguments</span>
        <span style="color: #51afef; font-style: italic;">return</span> value.substr<span style="color: #98be65;">(</span>0, 10<span style="color: #98be65;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">return the value only up to 10 characters</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>add it in the declarations in <code>app.modules.ts</code> and import it</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> ShortenPipe <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./shorten.pip'</span>;
@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    declarations: <span style="color: #98be65;">[</span>
        AppComponent,
        ShortenPipe
    <span style="color: #98be65;">]</span>,
    imports: <span style="color: #98be65;">[</span>
        BrowserModule
    <span style="color: #98be65;">]</span>,
    providers: <span style="color: #98be65;">[]</span>,
    bootstrap: <span style="color: #98be65;">[</span>AppComponent<span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>now use in the template by the pipe's name <code>shorten</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | shorten }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>passing multiple parameter to a pipe</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">ShortenPipe</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">PipeTransform</span> <span style="color: #fff0f5;">{</span>

    transfrom<span style="color: #c678dd;">(</span>value: <span style="color: #51afef; font-style: italic;">any</span>, <span style="color: #51afef; font-style: italic;">from</span>: <span style="color: #51afef; font-style: italic;">number</span>, to: <span style="color: #51afef; font-style: italic;">number</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> value.substr<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">from</span>, to<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>then in the template</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ varName | shorten:2:3 }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb412768" class="outline-3">
<h3 id="orgb412768"><span class="section-number-3">20.4</span> Asynchronous pipe</h3>
<div class="outline-text-3" id="text-20-4">
<ul class="org-ul">
<li>simple example of implementing a fake async and printing the data on the screen</li>
<li>in TS create a simple promise</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">appStatus = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">Promise</span><span style="color: #fff0f5;">(</span><span style="color: #c678dd;">(</span>resolve, reject<span style="color: #c678dd;">)</span> =&gt; <span style="color: #c678dd;">{</span>
    setTimeout<span style="color: #98be65;">(</span><span style="color: #00bfff;">()</span> =&gt; <span style="color: #00bfff;">{</span>
        resolve<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'stable'</span><span style="color: #a9a1e1;">)</span>;
    <span style="color: #00bfff;">}</span>, 2000<span style="color: #98be65;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">simulate a 2s http delay</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>then the template will auto update with the <code>async</code> pipe, which normally it would <b>not</b>, for performance reasons</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">span</span>&gt;{{ appStatus | async }}&lt;/<span style="color: #c678dd;">span</span>&gt;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaa8dee2" class="outline-2">
<h2 id="orgaa8dee2"><span class="section-number-2">21</span> Http requests</h2>
<div class="outline-text-2" id="text-21">
<ul class="org-ul">
<li>Make sure to import <code>HttpModule</code> and add it to the <code>imports</code> in <code>@NgModule</code> in <code>app.module.ts</code></li>
<li>Alternatively import <code>HttpClientModule</code> from <code>@angular/common/http</code>, which is a newer version with interceptors
<ul class="org-ul">
<li>HttpClient can use generics to extract the data, eg. <code>this.httpClient.get&lt;Recipe[]&gt;(address)</code>, now we do not need to use a <code>Response</code> object, since the data is already extracted</li>
<li>We can pass a <b>second</b> parameter to <code>get</code>, an object, and say <code>{observe:'response', responseType: 'text'}</code>, which will now not extract the data and will simply retrieve the entire response as a <code>HttpResponse</code>, changing to <code>observe:'body'</code> simply gives back the body as text. Other responses are <code>blob</code> for files and <code>json</code> (default), refer to the docs for others.</li>
<li>The <code>put</code> and <code>post</code> methods are the same, and can have a configuration object passed as their <b>third</b> parameter. One of an interesting options is the <code>{observe:'event'}</code> which allows to look up the different stages of posting/putting</li>
<li>The headers can be set by the configuration object with <code>{headers: new HttpHeaders().set('xxxx', 'xxxx')}</code></li>
<li>The parameters can be set by the configuration object with <code>{params: new HttpParams().set('xxx', 'xxx')}</code></li>
<li>One nice parameter in the configuration object is <code>{reportProgress: true}</code> to see a report of the request progress</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org0773854" class="outline-3">
<h3 id="org0773854"><span class="section-number-3">21.1</span> Sending data</h3>
<div class="outline-text-3" id="text-21-1">
<ul class="org-ul">
<li>Create a new service</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Injectable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Http <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/http'</span>;

@Injectable<span style="color: #fff0f5;">()</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">ServerService</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> http: Http<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    storeServers<span style="color: #c678dd;">(</span>servers: <span style="color: #51afef; font-style: italic;">any</span><span style="color: #98be65;">[]</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.http.post<span style="color: #98be65;">(</span><span style="color: #98be65;">'https://udemy-firebase-test.firebaseio.com/data.json'</span>, servers<span style="color: #98be65;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">data.json is firebase specific</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>then in your app's component you need to inject the service</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> ServerService <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./server.service'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #fff0f5;">{</span>

    servers = <span style="color: #c678dd;">[</span><span style="color: #98be65;">{</span>...server data...<span style="color: #98be65;">}</span>, <span style="color: #98be65;">{</span>...server data...<span style="color: #98be65;">}</span>, <span style="color: #98be65;">{</span>...server data...<span style="color: #98be65;">}</span><span style="color: #c678dd;">]</span>
    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> serverService: ServerService<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    onSave<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.serverService.storeServers<span style="color: #98be65;">(</span><span style="color: #51afef; font-style: italic;">this</span>.servers<span style="color: #98be65;">)</span>.subscribe<span style="color: #98be65;">(</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">request needs to be subscribed to</span>
            <span style="color: #00bfff;">(</span>response<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                console.log<span style="color: #a9a1e1;">(</span>response<span style="color: #a9a1e1;">)</span>;
            <span style="color: #00bfff;">}</span>,
            <span style="color: #00bfff;">(</span>error<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                console.log<span style="color: #a9a1e1;">(</span>error<span style="color: #a9a1e1;">)</span>;
            <span style="color: #00bfff;">}</span>
        <span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1f66e4b" class="outline-3">
<h3 id="org1f66e4b"><span class="section-number-3">21.2</span> Custom headers</h3>
<div class="outline-text-3" id="text-21-2">
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Injectable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Headers, Http <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/http'</span>;

@Injectable<span style="color: #fff0f5;">()</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">ServerService</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> http: Http<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    storeServers<span style="color: #c678dd;">(</span>servers: <span style="color: #51afef; font-style: italic;">any</span><span style="color: #98be65;">[]</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">headers</span> = <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">Headers</span><span style="color: #98be65;">(</span><span style="color: #00bfff;">{</span><span style="color: #98be65;">'Content-Type'</span>: <span style="color: #98be65;">'application/json'</span><span style="color: #00bfff;">}</span><span style="color: #98be65;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">not needed here as it is the default one anyway</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.http.post<span style="color: #98be65;">(</span><span style="color: #98be65;">'https://udemy-firebase-test.firebaseio.com/data.json'</span>, servers, <span style="color: #00bfff;">{</span>headers: headers<span style="color: #00bfff;">}</span><span style="color: #98be65;">)</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">data.json is firebase specific</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org043c78a" class="outline-3">
<h3 id="org043c78a"><span class="section-number-3">21.3</span> Receiving data</h3>
<div class="outline-text-3" id="text-21-3">
<ul class="org-ul">
<li>in the service</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Injectable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Headers, Http <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/http'</span>;

@Injectable<span style="color: #fff0f5;">()</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">ServerService</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> http: Http<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>

    getServers<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.http.<span style="color: #51afef; font-style: italic;">get</span><span style="color: #98be65;">(</span><span style="color: #98be65;">'https://udemy-firebase-test.firebaseio.com/data.json'</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>in the component</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">
onGet<span style="color: #fff0f5;">()</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">this</span>.serverService.getServers<span style="color: #c678dd;">()</span>.subscribe<span style="color: #c678dd;">(</span>
        <span style="color: #98be65;">(</span>response<span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">{</span>
            <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">data</span> = response.json<span style="color: #00bfff;">()</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">convert to json with the json method</span>
            console.log<span style="color: #00bfff;">(</span>data<span style="color: #00bfff;">)</span>;
        <span style="color: #98be65;">}</span>,
        <span style="color: #98be65;">(</span>error<span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">{</span>
            console.log<span style="color: #00bfff;">(</span>error<span style="color: #00bfff;">)</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">)</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4a69788" class="outline-3">
<h3 id="org4a69788"><span class="section-number-3">21.4</span> Wrapping the data transformation in the service component and error handling</h3>
<div class="outline-text-3" id="text-21-4">
<ul class="org-ul">
<li>Need additional imports in the service</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Headers, Http, Response <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/http'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #98be65;">'rxjs/Rx'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Observable <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'rxjs/Observable'</span>;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">only needed to catch errors</span>
</pre>
</div>
<ul class="org-ul">
<li>now we can transform the data using the <code>map()</code> method</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">getServers<span style="color: #fff0f5;">()</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.http.<span style="color: #51afef; font-style: italic;">get</span><span style="color: #c678dd;">(</span><span style="color: #98be65;">'https://udemy-firebase-test.firebaseio.com/data.json'</span><span style="color: #c678dd;">)</span>.map<span style="color: #c678dd;">(</span>
        <span style="color: #98be65;">(</span>response: Response<span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">{</span>
            <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">data</span> = response.json<span style="color: #00bfff;">()</span>;
            <span style="color: #51afef; font-style: italic;">return</span> data;   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">we are still returning an observable but the data is already transformed</span>
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">)</span>
    .<span style="color: #51afef; font-style: italic;">catch</span><span style="color: #c678dd;">(</span>
        <span style="color: #98be65;">(</span>error: Response<span style="color: #98be65;">)</span> =&gt; <span style="color: #98be65;">{</span>
            <span style="color: #51afef; font-style: italic;">return</span> Observable.<span style="color: #51afef; font-style: italic;">throw</span><span style="color: #00bfff;">(</span>error<span style="color: #00bfff;">)</span>;
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">or</span>
            <span style="color: #51afef; font-style: italic;">return</span> Observable.<span style="color: #51afef; font-style: italic;">throw</span><span style="color: #00bfff;">(</span><span style="color: #98be65;">'Something went wrong'</span><span style="color: #00bfff;">)</span>;
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">or</span>
            <span style="color: #51afef; font-style: italic;">return</span> Observable.<span style="color: #51afef; font-style: italic;">throw</span><span style="color: #00bfff;">(</span><span style="color: #98be65;">'Data retrieval error'</span><span style="color: #00bfff;">)</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">)</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org712e38b" class="outline-3">
<h3 id="org712e38b"><span class="section-number-3">21.5</span> Using the async pipe</h3>
<div class="outline-text-3" id="text-21-5">
<p>
If the data only needs to be placed on the template, then there is no need for an observable <code>subscribe</code>, the data will be unpacked automatically if the <code>async</code> pipe is used.
</p>
</div>
</div>
</div>
<div id="outline-container-orga0a30fb" class="outline-2">
<h2 id="orga0a30fb"><span class="section-number-2">22</span> Using firebase authentication</h2>
<div class="outline-text-2" id="text-22">
<ul class="org-ul">
<li>In Firebase post appends data, put overwrites data</li>
<li>Enable email base authentication in Firebase</li>
<li>Install the Firebase SDK with <code>npm i --save firebase</code></li>
<li>Initialise Firebase in a top level component with <code>ngOnInit</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Component, OnInit <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> * <span style="color: #51afef; font-style: italic;">as</span> firebase <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'firebase'</span>;

@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'app-root'</span>,
    templateUrl: <span style="color: #98be65;">'./app.component.html'</span>,
    styleUrls: <span style="color: #98be65;">[</span><span style="color: #98be65;">'./app.component.css'</span><span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span><span style="color: #fff0f5;">{</span>

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        firebase.initializeApp<span style="color: #98be65;">(</span><span style="color: #00bfff;">{</span>
            apiKey: <span style="color: #98be65;">"AIzaSyBspNNWUfdX9zpXwshFr7jJillHNeom1PY"</span>,
            authDomain: <span style="color: #98be65;">"udemy-firebase-test.firebaseapp.com"</span>
        <span style="color: #00bfff;">}</span><span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>

<div id="outline-container-orga14496a" class="outline-3">
<h3 id="orga14496a"><span class="section-number-3">22.1</span> Signing up, Signing in, token retrieval</h3>
<div class="outline-text-3" id="text-22-1">
<ul class="org-ul">
<li>create an authService</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> * <span style="color: #51afef; font-style: italic;">as</span> firebase <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'firebase'</span>;
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AuthService</span> <span style="color: #fff0f5;">{</span>
    token: <span style="color: #51afef; font-style: italic;">string</span>;

    signupUser<span style="color: #c678dd;">(</span>email: <span style="color: #51afef; font-style: italic;">string</span>, password: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        firebase.auth<span style="color: #98be65;">()</span>.createUserWithEmailAndPassword<span style="color: #98be65;">(</span>email, password<span style="color: #98be65;">)</span>
            .then<span style="color: #98be65;">(</span>
                <span style="color: #00bfff;">(</span>response<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                    console.log<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">"Account creation success!!"</span><span style="color: #a9a1e1;">)</span>;
                <span style="color: #00bfff;">}</span>
            <span style="color: #98be65;">)</span>.<span style="color: #51afef; font-style: italic;">catch</span><span style="color: #98be65;">(</span>
                <span style="color: #00bfff;">(</span>error<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                    console.log<span style="color: #a9a1e1;">(</span>error<span style="color: #a9a1e1;">)</span>;
                <span style="color: #00bfff;">}</span>
            <span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>

    signinUser<span style="color: #c678dd;">(</span>email: <span style="color: #51afef; font-style: italic;">string</span>, password: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        firebase.auth<span style="color: #98be65;">()</span>.signInWithEmailAndPassword<span style="color: #98be65;">(</span>email, password<span style="color: #98be65;">)</span>
            .then<span style="color: #98be65;">(</span>
                <span style="color: #00bfff;">(</span>response<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                    console.log<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">"Logged in"</span><span style="color: #a9a1e1;">)</span>;
                    console.log<span style="color: #a9a1e1;">(</span>response<span style="color: #a9a1e1;">)</span>;
                    firebase.auth<span style="color: #a9a1e1;">()</span>.currentUser.getToken<span style="color: #a9a1e1;">()</span>
                        .then<span style="color: #a9a1e1;">(</span>
                            <span style="color: #32cd32;">(</span>token: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #32cd32;">)</span> =&gt; <span style="color: #32cd32;">{</span>
                                <span style="color: #51afef; font-style: italic;">this</span>.token = token;
                            <span style="color: #32cd32;">}</span>
                        <span style="color: #a9a1e1;">)</span>
                <span style="color: #00bfff;">}</span>
            <span style="color: #98be65;">)</span>.<span style="color: #51afef; font-style: italic;">catch</span><span style="color: #98be65;">(</span>
                <span style="color: #00bfff;">(</span>error<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                    console.log<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">"Error while logging in"</span><span style="color: #a9a1e1;">)</span>;
                    console.log<span style="color: #a9a1e1;">(</span>error<span style="color: #a9a1e1;">)</span>;
                <span style="color: #00bfff;">}</span>
            <span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>

    getToken<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        firebase.auth<span style="color: #98be65;">()</span>.currentUser.getToken<span style="color: #98be65;">()</span>
            .then<span style="color: #98be65;">(</span>
                <span style="color: #00bfff;">(</span>token: <span style="color: #51afef; font-style: italic;">string</span><span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                    <span style="color: #51afef; font-style: italic;">this</span>.token = token;
                <span style="color: #00bfff;">}</span>
            <span style="color: #98be65;">)</span>;
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.token;  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">or inside of the promise to wait for the token</span>
    <span style="color: #c678dd;">}</span>

    isAuthenticated<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #51afef; font-style: italic;">this</span>.token != <span style="color: #51afef; font-style: italic;">null</span>;
    <span style="color: #c678dd;">}</span>

    logout<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        firebase.auth<span style="color: #98be65;">()</span>.signOut<span style="color: #98be65;">()</span>;
        <span style="color: #51afef; font-style: italic;">this</span>.token = <span style="color: #51afef; font-style: italic;">null</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org39f270a" class="outline-3">
<h3 id="org39f270a"><span class="section-number-3">22.2</span> Sending a token to Firebase with requests</h3>
<div class="outline-text-3" id="text-22-2">
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Http, Response <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/http'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">SomeClass</span> <span style="color: #fff0f5;">{</span>

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> http: Http<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{}</span>


    getData<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">token</span> = <span style="color: #51afef; font-style: italic;">this</span>.authService.getToken<span style="color: #98be65;">()</span>;

        <span style="color: #51afef; font-style: italic;">this</span>.http.<span style="color: #51afef; font-style: italic;">get</span><span style="color: #98be65;">(</span><span style="color: #98be65;">'https://udemy-firebase-test.firebaseio.com/data.json?auth'</span> + token<span style="color: #98be65;">)</span>.map<span style="color: #98be65;">(</span>
            <span style="color: #00bfff;">(</span>response: Response<span style="color: #00bfff;">)</span> =&gt; <span style="color: #00bfff;">{</span>
                <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">someData</span> = response.json<span style="color: #a9a1e1;">()</span>;
                <span style="color: #51afef; font-style: italic;">return</span> recipes;   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">returns an observable</span>
            <span style="color: #00bfff;">}</span>
        <span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org577ff08" class="outline-2">
<h2 id="org577ff08"><span class="section-number-2">23</span> Feature Modules</h2>
<div class="outline-text-2" id="text-23">
</div>
<div id="outline-container-org765f721" class="outline-3">
<h3 id="org765f721"><span class="section-number-3">23.1</span> <code>@NgModule</code> decorator options</h3>
<div class="outline-text-3" id="text-23-1">
</div>
<ol class="org-ol">
<li><a id="org2d7fdd0"></a><code>declarations</code><br />
<div class="outline-text-4" id="text-23-1-1">
<p>
This module uses:
</p>
<ul class="org-ul">
<li>components</li>
<li>directives</li>
<li>pipes</li>
</ul>
</div>
</li>

<li><a id="orgf04d294"></a><code>imports</code><br />
<div class="outline-text-4" id="text-23-1-2">
<p>
Which other modules does this module use? Get access to everything a module exports.
</p>
</div>
</li>

<li><a id="orgd5074e1"></a><code>providers</code><br />
<div class="outline-text-4" id="text-23-1-3">
<p>
Which services can be used in this module?
</p>
</div>
</li>

<li><a id="org76b9fbd"></a><code>bootstrap</code><br />
<div class="outline-text-4" id="text-23-1-4">
<p>
Which is the root component?
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org78960bc" class="outline-3">
<h3 id="org78960bc"><span class="section-number-3">23.2</span> Building a module</h3>
<div class="outline-text-3" id="text-23-2">
<ul class="org-ul">
<li>Create a separate file such as <code>module-name.module.ts</code></li>
<li>Import <code>NgModule</code> from <code>@angular/core</code></li>
<li>In the <code>@NgModule</code> decorator add <code>CommonModule</code> to the imports array. This allows the usage of common directives like <code>NgIf</code> or <code>NgClass</code> etc.</li>
<li>add any directive/components/pipes to the <code>declarations</code> array</li>
<li>Each module that includes abstracted routing, needs to have its own routing implemented. Child routes use the <code>RouterModule.forChild(routesArray)</code>, and not the <code>forRoot</code> method</li>
<li><b>However</b>, if the routing is the be left as is, then just use TS imports to let the router know where the components are.</li>
<li>Import the newly made module in <code>app.module.ts</code> and add it to the <code>@NgModule</code> imports array</li>
<li>Example that abstracts all the Recipe components  together:</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> NgModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> CommonModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/common'</span>;

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipesComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipes.component'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipeStartComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipe-start/recipe-start.component'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipeListComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipe-list/recipe-list.component'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipeEditComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipe-edit/recipe-edit.component'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipeDetailComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipe-detail/recipe-detail.component'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipeItemComponent <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipe-list/recipe-item/recipe-item.component'</span>;

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> RecipesRoutingModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./recipes-routing.module'</span>;

@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    declarations: <span style="color: #98be65;">[</span>
        RecipesComponent,
        RecipeStartComponent,
        RecipeListComponent,
        RecipeEditComponent,
        RecipeDetailComponent,
        RecipeItemComponent
    <span style="color: #98be65;">]</span>,
    imports: <span style="color: #98be65;">[</span>
        CommonModule,
        RecipesRoutingModule
    <span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">RecipesModule</span> <span style="color: #fff0f5;">{</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org11f51f1" class="outline-2">
<h2 id="org11f51f1"><span class="section-number-2">24</span> Shared modules</h2>
<div class="outline-text-2" id="text-24">
<ul class="org-ul">
<li>To be able to use modules in multiple external modules, we need to make a shared module. To create a shared module simply add a new file eg. <code>module-name.module.ts</code>. Then you need to add an <code>exports</code> array with the component/directive/pipe to the <code>@NgModule</code> decorator.</li>
<li><b>Never provide services in shared modules</b></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> NgModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> CommonModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/common'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> DropdownDirective <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./dropdown.directive'</span>;
@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    declarations: <span style="color: #98be65;">[</span>
        DropdownDirective
    <span style="color: #98be65;">]</span>,
    imports: <span style="color: #98be65;">[</span>
        CommonModule,
        DropdownDirective
    <span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">SharedModule</span> <span style="color: #fff0f5;">{}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a8ff29" class="outline-2">
<h2 id="org2a8ff29"><span class="section-number-2">25</span> Lazy loading modules using routes</h2>
<div class="outline-text-2" id="text-25">
<ul class="org-ul">
<li>Implemented via routing</li>
<li>In the root route config add the desired path, but do not load a <code>component</code>, instead use the <code>loadChildren</code> key :</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #fff0f5;">{</span> path: <span style="color: #98be65;">'recipes'</span>, loadChildren: <span style="color: #98be65;">'./recipes/recipes.module#RecipesModule'</span> <span style="color: #fff0f5;">}</span>,
</pre>
</div>
<ul class="org-ul">
<li>Note that the value of <code>loadChildren</code> is a string with the path to the module followed by a <code>#</code> and the name of the module, in this case <code>RecipesModule</code></li>
<li>Keep in mind that any child routes in the feature module will start with <code>''</code></li>
<li>If a guard is to be applied to a lazy load, then use <code>canLoad</code> interface, instead of <code>canActivate</code></li>
<li>Using a service in the <code>providers</code> array in an <code>@NgModule</code> of a lazily loaded module <b>will</b> create a seperate instance of that service, which might not be desired. Otherwise just put the service in the parent module, most likely in the root module.</li>
<li>Diagram of lazy loading and service provided in the parent:</li>
</ul>

<div class="figure">
<p><img src="images/lazyloading_parentinjection.png" alt="lazyloading_parentinjection.png" />
</p>
</div>
<ul class="org-ul">
<li>Diagram of lazy loading and service provided in both the parent and the lazily loaded child, causing a seperate instance of the service:</li>
</ul>

<div class="figure">
<p><img src="images/lazyloading_childinjection.png" alt="lazyloading_childinjection.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgdc0cbd8" class="outline-2">
<h2 id="orgdc0cbd8"><span class="section-number-2">26</span> Preloading lazy loading</h2>
<div class="outline-text-2" id="text-26">
<ul class="org-ul">
<li>In the root configuration, or wherever you have lazy loading add a <code>preloadingStrategy</code> key to the RouterModule</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">RouterModule.forRoot<span style="color: #fff0f5;">(</span>appRoutes, <span style="color: #c678dd;">{</span>preloadingStrategy: PreloadAllModules<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org127bd6e" class="outline-2">
<h2 id="org127bd6e"><span class="section-number-2">27</span> Core modules</h2>
<div class="outline-text-2" id="text-27">
<ul class="org-ul">
<li>Used to make the <code>app.module.ts</code> more lean, and generally more tidy</li>
<li>Usually you would put in this module all root level:
<ul class="org-ul">
<li>components</li>
<li>routing</li>
<li>services</li>
<li>directives (maybe)</li>
</ul></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> NgModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/core'</span>;

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> anyHeader/RootComponents/Directives <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'path'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> yourMainAppRoutingModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'path'</span>;
<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> sharedModulesIfAny <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'path'</span>;

@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    declarations: <span style="color: #98be65;">[</span>
        anyComponents/directives/pipes
    <span style="color: #98be65;">]</span>,
    imports: <span style="color: #98be65;">[</span>
        sharedModulesIfAny
        yourMainAppRoutingModule
    <span style="color: #98be65;">]</span>,
    exports: <span style="color: #98be65;">[</span>
        yourMainAppRoutingModule,
        headerComponent  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">if used in the app component template</span>
    <span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">CoreModule</span> <span style="color: #fff0f5;">{</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>Now in the <code>app.module.ts</code> add the <code>CoreModule</code> to the imports array in <code>@NgModule</code></li>
</ul>
</div>
</div>

<div id="outline-container-org558031e" class="outline-2">
<h2 id="org558031e"><span class="section-number-2">28</span> Ahead-of-Time Compilation</h2>
<div class="outline-text-2" id="text-28">
<ul class="org-ul">
<li>run <code>ng build --prod --aot</code></li>
<li>run <code>ng build --aot</code></li>
<li>Make sure to verify if all templates work properly as mistakes might occur</li>
</ul>
</div>
</div>

<div id="outline-container-org3f685c9" class="outline-2">
<h2 id="org3f685c9"><span class="section-number-2">29</span> Deployment</h2>
<div class="outline-text-2" id="text-29">
</div>
<div id="outline-container-orgd8a091a" class="outline-3">
<h3 id="orgd8a091a"><span class="section-number-3">29.1</span> Setting the right path</h3>
<div class="outline-text-3" id="text-29-1">
<ul class="org-ul">
<li>If the app is being launch in a nested path, not in the root then the <code>base</code> tag needs to be set in the <code>head</code> of the <code>index.html</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">base</span> href<span style="color: #98be65;">"/some-path/"</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>You can also use the CLI if you only need it for the build</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">ng build --prod --aot --base-href /some-path/
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf1e878e" class="outline-2">
<h2 id="orgf1e878e"><span class="section-number-2">30</span> Animations</h2>
<div class="outline-text-2" id="text-30">
</div>
<div id="outline-container-org3d7832f" class="outline-3">
<h3 id="org3d7832f"><span class="section-number-3">30.1</span> Setup</h3>
<div class="outline-text-3" id="text-30-1">
<ul class="org-ul">
<li>Install the animations package</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">npm install --save @angular/animations
</pre>
</div>
<ul class="org-ul">
<li>Add <code>BrowserAnimationsModule</code> to imports in the <code>@NgModule</code>, which is imported from <code>@angular/platform-browser/animations</code></li>
<li>Import necessary modules (<code>trigger</code>, <code>state</code>, <code>style</code>) in the components from <code>@angular/animations</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgf72d34e" class="outline-3">
<h3 id="orgf72d34e"><span class="section-number-3">30.2</span> Component setup</h3>
<div class="outline-text-3" id="text-30-2">
<ul class="org-ul">
<li>Remember about the imports for <code>trigger</code>, <code>state</code>, <code>style</code>&#x2026;etc..</li>
<li>Setup a trigger in the <code>animations</code> array, in this case <code>@divState</code>, this trigger is then added to the html element like so (with a bound variable <code>state</code>):</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> [@divState]=<span style="color: #98be65;">"state"</span>&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
<ul class="org-ul">
<li>the TS component looks like this, with some examples</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'app-root'</span>,
    templateUrl: <span style="color: #98be65;">'./app.component.html'</span>,
    styleUrls: <span style="color: #98be65;">[</span><span style="color: #98be65;">'./app.component.css'</span><span style="color: #98be65;">]</span>,
    animations: <span style="color: #98be65;">[</span>
        trigger<span style="color: #00bfff;">(</span><span style="color: #98be65;">'divState'</span>, <span style="color: #a9a1e1;">[</span>
            state<span style="color: #32cd32;">(</span><span style="color: #98be65;">'normal'</span>, style<span style="color: #4db5bd;">(</span><span style="color: #a2b6da;">{</span>
                <span style="color: #98be65;">'background-color'</span>: <span style="color: #98be65;">'red'</span>,
                transform: <span style="color: #98be65;">'translateX(0)'</span>
            <span style="color: #a2b6da;">}</span><span style="color: #4db5bd;">)</span><span style="color: #32cd32;">)</span>,
            state<span style="color: #32cd32;">(</span><span style="color: #98be65;">'highlighted'</span>, style<span style="color: #4db5bd;">(</span><span style="color: #a2b6da;">{</span>
                <span style="color: #98be65;">'background-color'</span>: blue,
                transform: <span style="color: #98be65;">'translateX(100px)'</span>
            <span style="color: #a2b6da;">}</span><span style="color: #4db5bd;">)</span><span style="color: #32cd32;">)</span>
        <span style="color: #a9a1e1;">]</span><span style="color: #00bfff;">)</span>,
        transition<span style="color: #00bfff;">(</span><span style="color: #98be65;">'normal =&gt; highlighted'</span>, animate<span style="color: #a9a1e1;">(</span>300<span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>,
        transition<span style="color: #00bfff;">(</span><span style="color: #98be65;">'normal &lt;=&gt; highlighted'</span>, animate<span style="color: #a9a1e1;">(</span>300<span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">means back and forth</span>
        transition<span style="color: #00bfff;">(</span><span style="color: #98be65;">'normal &lt;=&gt; *'</span>, animate<span style="color: #a9a1e1;">(</span>300<span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">use a wild card to transition to any</span>
        transition<span style="color: #00bfff;">(</span><span style="color: #98be65;">'normal &lt;=&gt; *'</span>, animate<span style="color: #a9a1e1;">(</span>300, style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">use "during" a transition style</span>
            borderRadius: <span style="color: #98be65;">'50px'</span>
        <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span><span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>
        transition<span style="color: #00bfff;">(</span><span style="color: #98be65;">'normal &lt;=&gt; *'</span>, animate<span style="color: #a9a1e1;">(</span>300, <span style="color: #32cd32;">[</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">complex animation with a "during" array</span>
            style<span style="color: #4db5bd;">(</span><span style="color: #a2b6da;">{</span>
                backgroundColor: orange
            <span style="color: #a2b6da;">}</span><span style="color: #4db5bd;">)</span>,
            animation<span style="color: #4db5bd;">(</span>1000, style<span style="color: #a2b6da;">(</span><span style="color: #ff8c00;">{</span>
                borderRadius: <span style="color: #98be65;">'50px'</span>
            <span style="color: #ff8c00;">}</span><span style="color: #a2b6da;">)</span><span style="color: #4db5bd;">)</span>,
            animate<span style="color: #4db5bd;">(</span>500<span style="color: #4db5bd;">)</span>
        <span style="color: #32cd32;">]</span><span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>
    <span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #fff0f5;">{</span>
    state = <span style="color: #98be65;">'normal'</span>;

    onAnimate<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.state == <span style="color: #98be65;">'normal'</span> ? <span style="color: #51afef; font-style: italic;">this</span>.state = <span style="color: #98be65;">'highlighted'</span> : <span style="color: #51afef; font-style: italic;">this</span>.state = <span style="color: #98be65;">'normal'</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b27e64" class="outline-3">
<h3 id="org9b27e64"><span class="section-number-3">30.3</span> Example of animating an element in and out of the DOM</h3>
<div class="outline-text-3" id="text-30-3">
<div class="org-src-container">
<pre class="src src-typescript">animations: <span style="color: #fff0f5;">[</span>
    trigger<span style="color: #c678dd;">(</span><span style="color: #98be65;">'list1'</span>, <span style="color: #98be65;">[</span>
        state<span style="color: #00bfff;">(</span><span style="color: #98be65;">'in'</span>, style<span style="color: #a9a1e1;">(</span><span style="color: #32cd32;">{</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">'in' is just a dummy, since it comes from void to any</span>
            opacity: 1,
            transform: <span style="color: #98be65;">'translateX(0)'</span>
        <span style="color: #32cd32;">}</span><span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>
    <span style="color: #98be65;">]</span><span style="color: #c678dd;">)</span>,
    transition<span style="color: #c678dd;">(</span><span style="color: #98be65;">'void =&gt; *'</span>, <span style="color: #98be65;">[</span>   <span style="color: #5B6268;">// </span><span style="color: #5B6268;">transition in</span>
        style<span style="color: #00bfff;">(</span><span style="color: #a9a1e1;">{</span>
            opacity: 0,
            transform: <span style="color: #98be65;">'tranlateX(-100px)'</span>
        <span style="color: #a9a1e1;">}</span><span style="color: #00bfff;">)</span>,
        animate<span style="color: #00bfff;">(</span>300<span style="color: #00bfff;">)</span>
    <span style="color: #98be65;">]</span><span style="color: #c678dd;">)</span>,
    transition<span style="color: #c678dd;">(</span><span style="color: #98be65;">'* =&gt; void'</span>, <span style="color: #98be65;">[</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">transition out</span>
        animate<span style="color: #00bfff;">(</span>300, style<span style="color: #a9a1e1;">(</span><span style="color: #32cd32;">{</span>
            transform: <span style="color: #98be65;">'translateX(100px)'</span>,
            opacity: 0
        <span style="color: #32cd32;">}</span><span style="color: #a9a1e1;">)</span><span style="color: #00bfff;">)</span>
    <span style="color: #98be65;">]</span><span style="color: #c678dd;">)</span>
<span style="color: #fff0f5;">]</span>

</pre>
</div>
<ul class="org-ul">
<li>The html would have:</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> [@list1]&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa81bab" class="outline-3">
<h3 id="orgaa81bab"><span class="section-number-3">30.4</span> More control over the entire animation</h3>
<div class="outline-text-3" id="text-30-4">
<ul class="org-ul">
<li>Use keyframes to fine tune the transition, the <code>offset</code> indicates the steps' start point</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">transition<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'void =&gt; *'</span>, <span style="color: #c678dd;">[</span>
    animate<span style="color: #98be65;">(</span>1000, keyframes<span style="color: #00bfff;">(</span><span style="color: #a9a1e1;">[</span>
        style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span>
            transform: <span style="color: #98be65;">'translateX(-100px)'</span>,
            opacity: 0,
            offset: 0
        <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span>,
        style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span>
            transform: <span style="color: #98be65;">'translateX(-50px)'</span>,
            opacity: 0.5,
            offset: 0.3
        <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span>,
        style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span>
            transform: <span style="color: #98be65;">'translateX(-20px)'</span>,
            opacity: 1,
            offset: 0.8
        <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span>,
        style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span>
            transform: <span style="color: #98be65;">'translateX(0px)'</span>,
            opacity: 1,
            offset: 1
        <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span>,
    <span style="color: #a9a1e1;">]</span><span style="color: #00bfff;">)</span><span style="color: #98be65;">)</span>
<span style="color: #c678dd;">]</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0c9bf40" class="outline-3">
<h3 id="org0c9bf40"><span class="section-number-3">30.5</span> Grouping</h3>
<div class="outline-text-3" id="text-30-5">
<ul class="org-ul">
<li>Just add a <code>group</code> method to the transitions array and add your animates there</li>
</ul>
</div>
</div>

<div id="outline-container-orge1c9871" class="outline-3">
<h3 id="orge1c9871"><span class="section-number-3">30.6</span> Animation callbacks</h3>
<div class="outline-text-3" id="text-30-6">
<ul class="org-ul">
<li><code>$event</code> passing is optional</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">div</span> (@divState.start)=<span style="color: #98be65;">"animationStarted()"</span> (@divState.done)=<span style="color: #98be65;">"animationEnded($event)"</span>&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd34acdd" class="outline-3">
<h3 id="orgd34acdd"><span class="section-number-3">30.7</span> Animating routes and hiding the footer</h3>
<div class="outline-text-3" id="text-30-7">
<ul class="org-ul">
<li>Create a <code>const</code> animation for the router (preferably)</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> trigger, animate, transition, style, query, group <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/animations'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">routerTransition</span> = trigger<span style="color: #fff0f5;">(</span><span style="color: #98be65;">'routerTransition'</span>, <span style="color: #c678dd;">[</span>
    transition<span style="color: #98be65;">(</span><span style="color: #98be65;">'* &lt;=&gt; *'</span>, <span style="color: #00bfff;">[</span>
        query<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">':enter, :leave'</span>,
            style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span> position: <span style="color: #98be65;">'fixed'</span>, width: <span style="color: #98be65;">'100%'</span> <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span>,
            <span style="color: #32cd32;">{</span> optional: <span style="color: #51afef; font-style: italic;">true</span> <span style="color: #32cd32;">}</span><span style="color: #a9a1e1;">)</span>,

        group<span style="color: #a9a1e1;">(</span><span style="color: #32cd32;">[</span>

            query<span style="color: #4db5bd;">(</span><span style="color: #98be65;">':enter'</span>, <span style="color: #a2b6da;">[</span>
                style<span style="color: #ff8c00;">(</span><span style="color: #fff0f5;">{</span> transform: <span style="color: #98be65;">'translateX(100%)'</span>, opacity: 0 <span style="color: #fff0f5;">}</span><span style="color: #ff8c00;">)</span>,
                animate<span style="color: #ff8c00;">(</span>
                    <span style="color: #98be65;">'.2s ease-in-out'</span>,
                    style<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span> transform: <span style="color: #98be65;">'translateX(0%)'</span>, opacity: 1 <span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
                <span style="color: #ff8c00;">)</span><span style="color: #a2b6da;">]</span>, <span style="color: #a2b6da;">{</span> optional: <span style="color: #51afef; font-style: italic;">true</span> <span style="color: #a2b6da;">}</span><span style="color: #4db5bd;">)</span>,

            query<span style="color: #4db5bd;">(</span><span style="color: #98be65;">':leave'</span>, <span style="color: #a2b6da;">[</span>
                style<span style="color: #ff8c00;">(</span><span style="color: #fff0f5;">{</span> transform: <span style="color: #98be65;">'translateX(0%)'</span>, opacity: 1 <span style="color: #fff0f5;">}</span><span style="color: #ff8c00;">)</span>,
                animate<span style="color: #ff8c00;">(</span>
                    <span style="color: #98be65;">'.2s ease-in-out'</span>,
                    style<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span> transform: <span style="color: #98be65;">'translateX(-100%)'</span>, opacity: 0 <span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
                <span style="color: #ff8c00;">)</span><span style="color: #a2b6da;">]</span>, <span style="color: #a2b6da;">{</span> optional: <span style="color: #51afef; font-style: italic;">true</span> <span style="color: #a2b6da;">}</span><span style="color: #4db5bd;">)</span>
        <span style="color: #32cd32;">]</span><span style="color: #a9a1e1;">)</span>
    <span style="color: #00bfff;">]</span><span style="color: #98be65;">)</span>
<span style="color: #c678dd;">]</span><span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>Create a <code>const</code> animation for the footer</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> trigger, animate, transition, style <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/animations'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">fadeInAnimation</span> = trigger<span style="color: #fff0f5;">(</span>
    <span style="color: #98be65;">'fadeInAnimation'</span>, <span style="color: #c678dd;">[</span>
        transition<span style="color: #98be65;">(</span><span style="color: #98be65;">':enter'</span>, <span style="color: #00bfff;">[</span>
            style<span style="color: #a9a1e1;">(</span><span style="color: #32cd32;">{</span> opacity: 0 <span style="color: #32cd32;">}</span><span style="color: #a9a1e1;">)</span>,
            animate<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'.3s'</span>, style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span> opacity: 1 <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span><span style="color: #a9a1e1;">)</span>
        <span style="color: #00bfff;">]</span><span style="color: #98be65;">)</span>,
    <span style="color: #c678dd;">]</span>
<span style="color: #fff0f5;">)</span>
</pre>
</div>
<ul class="org-ul">
<li>The <code>app.component.html</code> should look like this then</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">app-header</span>&gt;&lt;/<span style="color: #c678dd;">app-header</span>&gt;

&lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"separator"</span>&gt;&lt;/<span style="color: #c678dd;">div</span>&gt;

&lt;<span style="color: #c678dd;">main</span> [@routerTransition]=<span style="color: #98be65;">"getState(o)"</span>
      (@routerTransition.start)=<span style="color: #98be65;">"footerVisible = false"</span>
      (@routerTransition.done)=<span style="color: #98be65;">"footerVisible = true"</span>&gt;
    &lt;<span style="color: #c678dd;">router-outlet</span> #o=<span style="color: #98be65;">"outlet"</span>&gt;&lt;/<span style="color: #c678dd;">router-outlet</span>&gt;
&lt;/<span style="color: #c678dd;">main</span>&gt;

&lt;<span style="color: #c678dd;">div</span> <span style="color: #db5762;">class</span>=<span style="color: #98be65;">"separator"</span>&gt;&lt;/<span style="color: #c678dd;">div</span>&gt;

&lt;<span style="color: #c678dd;">div</span> [@fadeInAnimation] *ngIf=<span style="color: #98be65;">"footerVisible"</span>&gt;
    &lt;<span style="color: #c678dd;">app-footer</span>&gt;&lt;/<span style="color: #c678dd;">app-footer</span>&gt;
&lt;/<span style="color: #c678dd;">div</span>&gt; <span style="color: #5B6268;">&lt;!--  </span><span style="color: #5B6268;">ends here </span><span style="color: #5B6268;">--&gt;</span>
</pre>
</div>
<ul class="org-ul">
<li>The <code>app.component.ts</code> should have the animations added to the <code>animations</code> array and a <code>getState</code> method in the body and have the <code>footerVisible</code> variable</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">@Component<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>
    selector: <span style="color: #98be65;">'app-root'</span>,
    templateUrl: <span style="color: #98be65;">'./app.component.html'</span>,
    styleUrls: <span style="color: #98be65;">[</span><span style="color: #98be65;">'./app.component.css'</span><span style="color: #98be65;">]</span>,
    animations: <span style="color: #98be65;">[</span>
        routerTransition,
        fadeInAnimation
    <span style="color: #98be65;">]</span>,
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AppComponent</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">OnInit</span> <span style="color: #fff0f5;">{</span>
    footerVisible = <span style="color: #51afef; font-style: italic;">true</span>;
    getState<span style="color: #c678dd;">(</span>outlet<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">return</span> outlet.activatedRouteData.state;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5b1b8aa" class="outline-3">
<h3 id="org5b1b8aa"><span class="section-number-3">30.8</span> Example fade-in-out with <code>*ngIf</code></h3>
<div class="outline-text-3" id="text-30-8">
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> trigger, state, animate, transition, style <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@angular/animations'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">fadeInOutAnimation</span> = trigger<span style="color: #fff0f5;">(</span>
    <span style="color: #98be65;">'fadeInOutAnimation'</span>, <span style="color: #c678dd;">[</span>
        transition<span style="color: #98be65;">(</span><span style="color: #98be65;">':enter'</span>, <span style="color: #00bfff;">[</span>
            style<span style="color: #a9a1e1;">(</span><span style="color: #32cd32;">{</span> opacity: 0 <span style="color: #32cd32;">}</span><span style="color: #a9a1e1;">)</span>,
            animate<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'.2s'</span>, style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span> opacity: 1 <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span><span style="color: #a9a1e1;">)</span>
        <span style="color: #00bfff;">]</span><span style="color: #98be65;">)</span>,
        transition<span style="color: #98be65;">(</span><span style="color: #98be65;">':leave'</span>, <span style="color: #00bfff;">[</span>
            style<span style="color: #a9a1e1;">(</span><span style="color: #32cd32;">{</span> opacity: 1 <span style="color: #32cd32;">}</span><span style="color: #a9a1e1;">)</span>,
            animate<span style="color: #a9a1e1;">(</span><span style="color: #98be65;">'.2s'</span>, style<span style="color: #32cd32;">(</span><span style="color: #4db5bd;">{</span> opacity: 0 <span style="color: #4db5bd;">}</span><span style="color: #32cd32;">)</span><span style="color: #a9a1e1;">)</span>
        <span style="color: #00bfff;">]</span><span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">]</span>
<span style="color: #fff0f5;">)</span>

</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeda3fdd" class="outline-2">
<h2 id="orgeda3fdd"><span class="section-number-2">31</span> NgRx</h2>
<div class="outline-text-2" id="text-31">
<ul class="org-ul">
<li>Diagram of the Angular Redux state control</li>
</ul>

<div class="figure">
<p><img src="images/ng_rx.png" alt="ng_rx.png" />
</p>
</div>
<ul class="org-ul">
<li>Install NgRx</li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">npm install --save @ngrx/store
</pre>
</div>
</div>

<div id="outline-container-org262fd0c" class="outline-3">
<h3 id="org262fd0c"><span class="section-number-3">31.1</span> Adding actions</h3>
<div class="outline-text-3" id="text-31-1">
<ul class="org-ul">
<li><code>shopping-list.actions.ts</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Action <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@ngrx/store'</span>;

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Ingredient <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'../../shared/ingredient.model'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">ADD_INGREDIENT</span> = <span style="color: #98be65;">'ADD_INGREDIENT'</span>;
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">ADD_INGREDIENTS</span> = <span style="color: #98be65;">'ADD_INGREDIENTS'</span>;
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">UPDATE_INGREDIENTS</span> = <span style="color: #98be65;">'UPDATE_INGREDIENTS'</span>;
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">DELETE_INGREDIENTS</span> = <span style="color: #98be65;">'DELETE_INGREDIENTS'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AddIngredient</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">Action</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">readonly</span> <span style="color: #51afef; font-style: italic;">type</span> = ADD_INGREDIENT;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">public</span> payload: Ingredient<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span> <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">AddIngredients</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">Action</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">readonly</span> <span style="color: #51afef; font-style: italic;">type</span> = ADD_INGREDIENTS;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">public</span> payload: Ingredient<span style="color: #98be65;">[]</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span> <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">UpdateIngredients</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">Action</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">readonly</span> <span style="color: #51afef; font-style: italic;">type</span> = UPDATE_INGREDIENTS;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">public</span> payload: <span style="color: #98be65;">{</span> idx: <span style="color: #51afef; font-style: italic;">number</span>, ingredient: Ingredient <span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span> <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">DeleteIngredients</span> <span style="color: #51afef; font-style: italic;">implements</span> <span style="color: #ECBE7B;">Action</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">readonly</span> <span style="color: #51afef; font-style: italic;">type</span> = DELETE_INGREDIENTS;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">public</span> payload: <span style="color: #51afef; font-style: italic;">number</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span> <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">type</span> <span style="color: #ECBE7B;">ShoppingListActions</span> = AddIngredient | AddIngredients | UpdateIngredients | DeleteIngredients;
</pre>
</div>
</div>
</div>

<div id="outline-container-org47f34b1" class="outline-3">
<h3 id="org47f34b1"><span class="section-number-3">31.2</span> Adding reducers</h3>
<div class="outline-text-3" id="text-31-2">
<ul class="org-ul">
<li><code>shopping-list.reducer.ts</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> * <span style="color: #51afef; font-style: italic;">as</span> ShoppingListActions <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'./shoppin-list.actions'</span>;

<span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Ingredient <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'../../shared/ingredient.model'</span>;

<span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">initialState</span> = <span style="color: #fff0f5;">{</span>
    ingredients: <span style="color: #c678dd;">[</span>
        <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">Ingredient</span><span style="color: #98be65;">(</span><span style="color: #98be65;">'Apple'</span>, 5<span style="color: #98be65;">)</span>,
        <span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">Ingredient</span><span style="color: #98be65;">(</span><span style="color: #98be65;">'Tomatoes'</span>, 10<span style="color: #98be65;">)</span>
    <span style="color: #c678dd;">]</span>
<span style="color: #fff0f5;">}</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">function</span> <span style="color: #c678dd;">shoppingListReducer</span><span style="color: #fff0f5;">(</span><span style="color: #db5762;">state</span> = <span style="color: #db5762;">initialState</span>, <span style="color: #db5762;">action</span>: <span style="color: #db5762;">ShoppingListActions</span>.<span style="color: #db5762;">ShoppingListActions</span><span style="color: #fff0f5;">)</span> <span style="color: #fff0f5;">{</span>
    <span style="color: #51afef; font-style: italic;">switch</span> <span style="color: #c678dd;">(</span>action.<span style="color: #51afef; font-style: italic;">type</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">case</span> ShoppingListActions.ADD_INGREDIENT:
            <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #98be65;">{</span>
                ...state,
                ingredients: <span style="color: #00bfff;">[</span>...state.ingredients, action.payload<span style="color: #00bfff;">]</span>
            <span style="color: #98be65;">}</span>
        <span style="color: #51afef; font-style: italic;">case</span> ShoppingListActions.ADD_INGREDIENTS:
            <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #98be65;">{</span>
                ...state,
                ingredients: <span style="color: #00bfff;">[</span>...state.ingredients, ...action.payload<span style="color: #00bfff;">]</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">add a whole array with a spread operator</span>
            <span style="color: #98be65;">}</span>
        <span style="color: #51afef; font-style: italic;">case</span> ShoppingListActions.UPDATE_INGREDIENTS:
            <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">ingredient</span> = state.ingredients<span style="color: #98be65;">[</span>action.payload.index<span style="color: #98be65;">]</span>;
            <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">updatedIngredient</span> = <span style="color: #98be65;">{</span>
                ...ingredient,
                ...action.payload.ingredient
            <span style="color: #98be65;">}</span>;
            <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">ingredients</span> = <span style="color: #98be65;">[</span>...state.ingredients<span style="color: #98be65;">]</span>;
            <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #98be65;">{</span>
                ...state,
                ingredients: ingredients
            <span style="color: #98be65;">}</span>;
        <span style="color: #51afef; font-style: italic;">case</span> ShoppingListActions.DELETE_INGREDIENT:
            <span style="color: #51afef; font-style: italic;">const</span> <span style="color: #db5762;">oldIngredients</span> = <span style="color: #98be65;">[</span>...state.ingredients<span style="color: #98be65;">]</span>;
            oldIngredients.splice<span style="color: #98be65;">(</span>action.payload, 1<span style="color: #98be65;">)</span>;
            <span style="color: #51afef; font-style: italic;">return</span> <span style="color: #98be65;">{</span>
                ...state,
                ingredients: oldIngredients
            <span style="color: #98be65;">}</span>
        <span style="color: #51afef; font-style: italic;">default</span>:
            <span style="color: #51afef; font-style: italic;">return</span> state;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge07aa8a" class="outline-3">
<h3 id="orge07aa8a"><span class="section-number-3">31.3</span> Registration of NgRx</h3>
<div class="outline-text-3" id="text-31-3">
<ul class="org-ul">
<li>add the following in <code>app.module.ts</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> StoreModule <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@ngrx/store'</span>;

@NgModule<span style="color: #fff0f5;">(</span><span style="color: #c678dd;">{</span>

    imports: <span style="color: #98be65;">[</span>
        StoreModule.forRoot<span style="color: #00bfff;">(</span><span style="color: #a9a1e1;">{</span>shoppingList: shoppingListReducer<span style="color: #a9a1e1;">}</span><span style="color: #00bfff;">)</span>  <span style="color: #5B6268;">// </span><span style="color: #5B6268;">key is part of the application, value is the name of the reducer</span>
    <span style="color: #98be65;">]</span>
<span style="color: #c678dd;">}</span><span style="color: #fff0f5;">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb4bc06e" class="outline-3">
<h3 id="orgb4bc06e"><span class="section-number-3">31.4</span> Retrieving data</h3>
<div class="outline-text-3" id="text-31-4">
<ul class="org-ul">
<li>in your component instantiate the <code>Store</code></li>
<li>as described in the <code>app.module.ts</code> retrieve the model from the <code>shoppingList</code> key, and get the <code>ingredients</code> key, which has the <code>Ingredient</code> array</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #51afef; font-style: italic;">import</span> <span style="color: #fff0f5;">{</span> Store <span style="color: #fff0f5;">}</span> <span style="color: #51afef; font-style: italic;">from</span> <span style="color: #98be65;">'@ngrx/store'</span>;

<span style="color: #51afef; font-style: italic;">export</span> <span style="color: #51afef; font-style: italic;">class</span> <span style="color: #ECBE7B;">className</span> <span style="color: #fff0f5;">{</span>
    shoppingListState: Observable&lt;<span style="color: #c678dd;">{</span>ingredients: Ingredient<span style="color: #98be65;">[]</span><span style="color: #c678dd;">}</span>;

    <span style="color: #51afef; font-style: italic;">constructor</span><span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">private</span> store: Store&lt;<span style="color: #98be65;">{</span>shoppingList: <span style="color: #00bfff;">{</span>ingredients: Ingredient<span style="color: #a9a1e1;">[]</span><span style="color: #00bfff;">}</span><span style="color: #98be65;">}</span>&gt;<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>

    <span style="color: #c678dd;">}</span>

    ngOnInit<span style="color: #c678dd;">()</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef; font-style: italic;">this</span>.shoppingListState = <span style="color: #51afef; font-style: italic;">this</span>.store.select<span style="color: #98be65;">(</span><span style="color: #98be65;">'shoppingList'</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #fff0f5;">}</span>
</pre>
</div>
<ul class="org-ul">
<li>shoppingListState is now an observable and can be directly retrieved with the <code>async</code> pipe</li>
</ul>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #c678dd;">li</span> *ngFor=<span style="color: #98be65;">"let ingredient of (shoppingListState | async).ingredients"</span>&gt;
    {{ ingredient.name }} {{ ingredient.amount }}
&lt;/<span style="color: #c678dd;">li</span>&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org87fa9d2" class="outline-3">
<h3 id="org87fa9d2"><span class="section-number-3">31.5</span> Adding data</h3>
<div class="outline-text-3" id="text-31-5">
<ul class="org-ul">
<li>Setup the dependency injection as with retrieving data</li>
</ul>
<div class="org-src-container">
<pre class="src src-typescript">
addIngredient<span style="color: #fff0f5;">(</span>ingredient: Ingredient<span style="color: #fff0f5;">)</span> <span style="color: #fff0f5;">{</span>
   <span style="color: #51afef; font-style: italic;">this</span>.store.dispatch<span style="color: #c678dd;">(</span><span style="color: #51afef; font-style: italic;">new</span> <span style="color: #ECBE7B;">ShoppingListActions.AddIngredient</span><span style="color: #98be65;">(</span>ingredient<span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span>;
<span style="color: #fff0f5;">}</span>
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orgdadc7d8" class="outline-2">
<h2 id="orgdadc7d8"><span class="section-number-2">32</span> Angular Universal (Angular on the backend)</h2>
<div class="outline-text-2" id="text-32">
<ul class="org-ul">
<li><a href="https://github.com/angular/angular-cli/wiki/stories-universal-rendering">Angular Universal Node.JS setup</a></li>
</ul>

<script src="../../assets/jquery-3.3.1.min.js"></script>
<script src="../../assets/notes.js"></script>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2017-05-26 Fri 14:02</p>
<p class="author">Author: Damian Chrzanowski</p>
<p class="date">Created: 2018-12-13 Thu 20:35</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
